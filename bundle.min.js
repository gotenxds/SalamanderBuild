!function t(e,i,s){function n(a,r){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!r&&h)return h(a,!0);if(o)return o(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){var i=e[a][1][t];return n(i?i:t)},l,l.exports,t,e,i,s)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.preload=function(){this.game.load.image("preloader","assets/preloader.gif")},e.prototype.create=function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0),this.game.state.start("preloader")},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],2:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./ship/ship"),o=Phaser.Key,a=t("./monsters/dayanguai"),r=t("./monsters/haimian"),h=t("./gui/singlePLayerGUI"),p=function(t){function e(){t.apply(this,arguments),this.keys={Key:o}}return s(e,t),e.prototype.create=function(){var t=this;this.game.add.group(this.game.world,"monsters"),this.gui=new h["default"](this.game),this.game.physics.startSystem(Phaser.Physics.ARCADE);for(var e=this.game.world.getByName("monsters"),i=700,s=0;3>s;s++,i-=300){for(var o=a["default"].generatePathPoints(700,i),p=1;5>p;p++){var l=100*p+700;o.x.unshift(l),o.y.unshift(i),e.add(new a["default"](this.game,l,i,o),!1)}e.add(new r["default"](this.game,i),!1)}this.ship=new n["default"](this.game),this.ship.onEnemyKilled.add(function(e){return t.gui.addToScore(90)}),this.ship.onDeath.add(function(){return t.gui.addToLives(-1)});var u=this.game.add.sound("mission_1_loop",.5);this.game.add.sound("mission_1_intro",.5).play().onStop.addOnce(function(){u.loopFull()}),this.ship.spawn()},e.prototype.update=function(){},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=p},{"./gui/singlePLayerGUI":3,"./monsters/dayanguai":7,"./monsters/haimian":11,"./ship/ship":14}],3:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("../utils/NineImage"),o=Phaser.Sprite,a=t("./textAsImage"),r=function(t){function e(i){t.call(this,i,0,0,n["default"].create(i,295,77,"playerPanel",0,0,0,80,60)),this.score=0,this.lives=2,i.world.add(this);var s=this.createPlayerIcon(i,"player1_icon"),o=e.createPlayerIconBackground(i,"playerIconBackground"),a=e.createLivesIconBackground(i,s,"lives_icon"),r=e.createXIconBackground(i,a,s,"lives_X");this.createTextAsImages(i,s,r),this.addChild(o),this.addChild(s),this.addChild(a),this.addChild(r),this.addChild(this.scoreText),this.addChild(this.livesText),this.scoreText.update(),this.livesText.update()}return s(e,t),e.prototype.createTextAsImages=function(t,e,i){this.scoreText=new a["default"](t,"score_numbers",e.width+5,5,this.buildFormattedScore()),this.livesText=new a["default"](t,"score_numbers",i.x+i.width,e.height/2+10,this.lives.toString()),this.livesText.scale.set(.9,.9)},e.createPlayerIconBackground=function(t,e){var i=t.add.sprite(-7,-1.5,e);return i.width=83,i.height=83,i},e.prototype.createPlayerIcon=function(t,e){var i=t.add.sprite(2,5,e);return i.width=63,i.height=63,i},e.createLivesIconBackground=function(t,e,i){var s=t.add.sprite(e.width+15,e.height/2+5,i);return s.scale.set(.65,.65),s},e.createXIconBackground=function(t,e,i,s){var n=t.add.sprite(e.x+e.width+8,i.height/2+13,"lives_X");return n.scale.set(1.1,1.1),n},e.prototype.addToScore=function(t){this.score+=t,this.scoreText.setText(this.buildFormattedScore())},e.prototype.addToLives=function(t){this.lives+=t,this.livesText.setText(this.lives.toString()),this.lives<0&&alert("Dead bitch !")},e.prototype.buildFormattedScore=function(){for(var t=this.score.toString(),i="",s=t.length-1;s>=0;s--)i=e.thereShouldBeACommaHere(s,t)?","+(t[s]+i):t[s]+i;return i},e.thereShouldBeACommaHere=function(t,e){return t>0&&(e.length-t)%3===0},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{"../utils/NineImage":17,"./textAsImage":4}],4:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Group,o=function(t){function e(e,i,s,n,o,a,r){void 0===s&&(s=0),void 0===n&&(n=0),void 0===o&&(o=""),void 0===a&&(a=1/0),void 0===r&&(r=-1),t.call(this,e),this.dirty=!0,this.tag=i,this.maxChars=a,this.text=o,this.x=s,this.y=n,-1===r&&(this.height=this.game.cache.getImage(i).height)}return s(e,t),e.prototype.setText=function(t){this.dirty=this.text!==t,this.text=t,this.update()},e.prototype.update=function(){if(this.dirty){this.dirty=!1,this.forEachAlive(function(t){return t.kill()},this);for(var t=0,e=0,i=void 0,s=0,n=this.text;s<n.length;s++){var o=n[s];i=this.getFirstDead(!0,t,e,this.tag,o),i.revive(),t+=i.width}}},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}],5:[function(t,e,i){"use strict";var s=t("./boot"),n=t("./preloader"),o=t("./menu"),a=t("./game"),r=new Phaser.Game(1280,720,Phaser.AUTO,"salamander-game");r.state.add("boot",new s["default"]),r.state.add("preloader",new n["default"]),r.state.add("menu",new o["default"]),r.state.add("game",new a["default"]),r.state.start("boot")},{"./boot":1,"./game":2,"./menu":6,"./preloader":13}],6:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.create=function(){var t=this.game.add.text(.5*this.game.width,.5*this.game.height,"MENU",{font:"42px Arial",fill:"#ffffff",align:"center"});t.anchor.set(.5),this.game.input.onDown.add(this.onInputDown,this)},e.prototype.update=function(){},e.prototype.onInputDown=function(){this.game.state.start("game")},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],7:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Math,o=t("./monster"),a=function(t){function e(e,i,s,n,o){void 0===o&&(o="red"),t.call(this,e,i,s,"monsters.dayanguai",o+"Eye.png"),this.path=[],this.pathIndex=0,this.initializeSprites(e,o),this.initializePath(e,n)}return s(e,t),e.generatePathPoints=function(t,e){for(var i={x:[],y:[]},s=0;15>s;s++)i.x.push(t),i.y.push(e),t+=this.movementStatesX[s%this.movementStatesX.length],e+=this.movementStatesY[s%this.movementStatesY.length];return i},e.prototype.initializeSprites=function(t,e){t.world.addChild(this),t.physics.arcade.enable(this),this.scale.set(.9,.9),this.topShell=t.add.sprite(27,0,"monsters.dayanguai",e+"Shell.png"),this.bottomShell=t.add.sprite(27,59,"monsters.dayanguai",e+"Shell.png"),this.addChild(this.topShell),this.addChild(this.bottomShell),this.topShell.anchor.set(.5,.5),this.bottomShell.anchor.set(.5,.5),this.bottomShell.angle=180,t.add.tween(this.topShell).to({y:5},500,Phaser.Easing.Bounce.InOut,!0,0,1/0,!0),t.add.tween(this.bottomShell).to({y:64},500,Phaser.Easing.Bounce.InOut,!0,0,1/0,!0)},e.prototype.initializePath=function(t,e){for(var i=1/t.width,s=0;1>=s;s+=i){var o=n.linearInterpolation(e.x,s),a=n.linearInterpolation(e.y,s);this.path.push({x:o,y:a})}},e.movementStatesX=[-230,150],e.movementStatesY=[0,-150],e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./monster":12}],8:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./explostion"),o=function(t){function e(e){t.call(this,e,"ship.blue","explosion_blue",6,35)}return s(e,t),e.prototype.destroy=function(){this.reset()},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./explostion":9}],9:[function(t,e,i){"use strict";var s=function(){function t(t,e,i,s,n){var o=e+"Explosion";this.aperture=t.add.sprite(-999,-999,o),this.smoke=t.add.sprite(-999,-999,o),this.aperture.anchor.set(.5,.5),this.smoke.anchor.set(.5,.5),this.aperture.animations.add("boom",Phaser.Animation.generateFrameNames(i+"_aperture_",1,s,".png"),20),this.smoke.animations.add("boom",Phaser.Animation.generateFrameNames(i+"_smoke_",1,n,".png"),15),this.sound=t.add.sound(o)}return t.prototype.play=function(t,e){var i=this;void 0===e&&(e=function(){}),this.smoke.animations.currentAnim.isPlaying||(this.sound&&!this.sound.isPlaying&&this.sound.play(),this.aperture.x=t.x,this.aperture.y=t.y,this.smoke.x=t.x,this.smoke.y=t.y,this.aperture.animations.play("boom").onComplete.addOnce(function(){return i.aperture.visible=!1}),this.smoke.animations.play("boom").onComplete.addOnce(function(){e(),i.destroy()}))},t.prototype.reset=function(){this.aperture.position.set(-999,-999),this.smoke.position.set(-999,-999)},t.prototype.destroy=function(){this.aperture.destroy(),this.smoke.destroy()},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{}],10:[function(t,e,i){"use strict";function s(t){return new o["default"](t,"green","green",6,33)}function n(t){return new a["default"](t)}var o=t("./explostion"),a=t("./blueExplosion");i.createGreen=s,i.createBlue=n},{"./blueExplosion":8,"./explostion":9}],11:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./monster"),o=function(t){function e(e,i){t.call(this,e,9999,i,"monsters.haimian"),this.path=[],this.pathIndex=0,this.health=1,this.maxHealth=1;for(var s=this.game.width+100,n=Phaser.Math.sinCosGenerator(s,30,1,15).cos,o=0;s>o;o++)this.path.push({x:o,y:i+n[o]});this.initializeSprites(e),this.animations.add("move",Phaser.Animation.generateFrameNames("haimian_",1,5,".png"),7,!0)}return s(e,t),e.prototype.update=function(){t.prototype.update.call(this),this.animations.currentAnim.isPlaying||this.animations.play("move")},e.prototype.initializeSprites=function(t){t.world.addChild(this),t.physics.arcade.enable(this),this.scale.set(.9,.9)},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./monster":12}],12:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Sprite,o=t("./death/explostions"),a=function(t){function e(e,i,s,n,a){var r=this;void 0===a&&(a=void 0),t.call(this,e,i,s,n,a),this.path=[],this.pathIndex=0,this.health=1,this.maxHealth=1,this.death=o.createGreen(e),this.checkWorldBounds=!0,this.events.onOutOfBounds.add(function(){r.destroy()})}return s(e,t),e.prototype.update=function(){var t=this;this.alive?(this.x=this.path[this.pathIndex].x,this.y=this.path[this.pathIndex].y,this.pathIndex++):this.death.play(this,function(){return t.destroy()})},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./death/explostions":10}],13:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments),this.ready=!1}return s(e,t),e.prototype.preload=function(){this.asset=this.game.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.game.load.setPreloadSprite(this.asset),this.game.load.atlasJSONHash("ship","/assets/ship.png","/assets/ship.json"),this.game.load.atlasJSONHash("ship.weapons","/assets/ship.weapons.png","/assets/ship.weapons.json"),this.game.load.atlasJSONHash("greenExplosion","/assets/greenExplosion.png","/assets/greenExplosion.json"),this.game.load.atlasJSONHash("ship.blueExplosion","/assets/ship.blueExplosion.png","/assets/ship.blueExplosion.json"),this.game.load.atlasJSONHash("monsters.dayanguai","/assets/monster_dayanguai.png","/assets/monster_dayanguai.json"),this.game.load.atlasJSONHash("monsters.haimian","/assets/monster_haimian.png","/assets/monster_haimian.json"),this.game.load.atlasJSONHash("score_numbers","/assets/score_numbers.png","/assets/score_numbers.json"),this.game.load.image("ship.trail","/assets/ship.trail.png"),this.game.load.image("playerPanel","/assets/player_panel.png"),this.game.load.image("playerIconBackground","/assets/player_icon_background.png"),this.game.load.image("player1_icon","/assets/player1_icon.png"),this.game.load.image("lives_icon","/assets/lives_icon.png"),this.game.load.image("lives_X","/assets/lives_X.png"),this.game.load.audio("ship.blueExplosion","/assets/audio/ship.blueExplosion.mp3"),this.game.load.audio("ship.zidan","/assets/audio/ship_zidan_sound.mp3"),this.game.load.audio("mission_1_intro","/assets/audio/sound-mission-1-intro.mp3"),this.game.load.audio("mission_1_loop","/assets/audio/sound-mission-1-loop.mp3"),this.ready=!0},e.prototype.loadResources=function(){},e.prototype.create=function(){},e.prototype.update=function(){this.game.state.start("menu")},e.prototype.onLoadComplete=function(){},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],14:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Keyboard,o=Phaser.Group,a=t("../monsters/death/explostions"),r=t("./systems/movementSystems"),h=t("./systems/weaponsSystem"),p=function(t){function e(e){var i=this;t.call(this,e),this.isSpawning=!1,this.invisibilityTimer=e.time.create(!1),this.invisibilityTimer.loop(3500,function(){return i.invisibilityPeriodOver()}),this.spawnEndPoint={x:e.width/3,y:e.world.centerY},this.explosion=a.createBlue(e),this.initializeSprites(),this.weaponsSystem=new h["default"](e,this,this.sparkSprite,{fire:n.SPACEBAR}),this.movementSystem=new r["default"](e,this,this.sprite,{up:n.W,down:n.S,right:n.D,left:n.A}),this.onEnemyKilled=this.weaponsSystem.onEnemyKilled,this.onDeath=this.sprite.events.onKilled}return s(e,t),e.prototype.spawn=function(){this.resetToMiddleLeft(),this.isSpawning=!0,this.invisibilityTimer.start(),this.invisibilityTween.start(),this.invisibilityTween.resume(),this.sprite.revive(1)},e.prototype.update=function(){this.isSpawning?this.yetToReachSpawnPoint()?this.movementSystem.moveWithSpin():this.isSpawning=!1:this.sprite.alive?(this.checkCollisions(),this.weaponsSystem.updateFire(),this.movementSystem.updateMovement()):this.respawn()},e.prototype.resetToMiddleLeft=function(){this.position.set(0,this.game.world.centerY)},e.prototype.invisibilityPeriodOver=function(){this.invisibilityTween.pause(),this.alpha=1,this.invisibilityTimer.stop(!1)},e.prototype.respawn=function(){this.explosion.play(this.sprite.body),this.spawn()},e.prototype.checkCollisions=function(){var t=this;this.game.world.getByName("monsters").forEachAlive(function(e){t.game.physics.arcade.collide(t,e)&&(!t.invisibilityTween.isPaused&&t.invisibilityTween.isRunning||t.sprite.kill())},this)},e.prototype.yetToReachSpawnPoint=function(){return this.x<=this.spawnEndPoint.x&&this.y<=this.spawnEndPoint.y},e.prototype.initializeSprites=function(){this.initializeShipSprite(),this.initializeSparkSprite(),this.initializeTrail()},e.prototype.initializeShipSprite=function(){this.sprite=this.game.add.sprite(0,0,"ship","start.png",this),this.game.physics.arcade.enable(this.sprite),this.sprite.anchor.setTo(.5),this.sprite.body.collideWorldBounds=!0},e.prototype.initializeSparkSprite=function(){this.sparkSprite=this.game.add.sprite(60,6,"ship.weapons"),this.sprite.addChild(this.sparkSprite),this.sparkSprite.anchor.set(.5,.5),this.sparkSprite.scale.set(.95),this.sparkSprite.visible=!1,this.invisibilityTween=this.game.add.tween(this).to({alpha:.3},200,Phaser.Easing.Linear.None,!1,0,1/0,!0)},e.prototype.initializeTrail=function(){var t=this.game.add.sprite(-38,8,"ship.trail");t.scale.set(.7),t.anchor.set(1,.5),this.sprite.addChild(t),this.game.add.tween(t.scale).to({x:.5,y:.2},250,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(t).to({alpha:.8},250,Phaser.Easing.Exponential.InOut,!0,0,1/0,!0)},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=p},{"../monsters/death/explostions":10,"./systems/movementSystems":15,"./systems/weaponsSystem":16}],15:[function(t,e,i){"use strict";var s=function(){function t(t,e,i,s){this.speed=4,this.frameRate=50,this.keyToMovement=[],this.keys=[],this.game=t,this.ship=e,this.shipSprite=i,this.keySchema=s,this.initializeKeyToMovement(s),this.initializeKeyEvents(s),this.initializeAnimations()}return t.prototype.updateMovement=function(){for(var t=0,e=this.keyToMovement;t<e.length;t++){var i=e[t];this.game.input.keyboard.isDown(i.key)&&i.func()}},t.prototype.moveWithSpin=function(){this.getCurrentAnimation().isPlaying||this.spin(),this.ship.x+=3*this.speed},t.prototype.spin=function(){var t=this;if(!this.shipSprite.animations.currentAnim.isPlaying){var e=this.shipSprite.animations.getAnimation("moveUpFull"),i=this.shipSprite.animations.getAnimation("moveDownFull"),s=3*this.frameRate;e.play(s,!1).onComplete.addOnce(function(){t.shipSprite.scale.setTo(1,-1),e.reverseOnce().play(s,!1).onComplete.addOnce(function(){i.play(s,!1).onComplete.addOnce(function(){t.shipSprite.scale.setTo(1,1),i.reverseOnce().play(s,!1)})})})}},t.prototype.upPressed=function(){var t=this;this.animateMovement("moveUp",function(){return t.upPressed()})},t.prototype.downPressed=function(){var t=this;this.animateMovement("moveDown",function(){return t.downPressed()})},t.prototype.directionKeyReleased=function(t){var e=this,i=this.getCurrentAnimation();"moveUp"===i.name&&t.keyCode===this.keySchema.up||"moveDown"===i.name&&t.keyCode===this.keySchema.down?(i.reverseOnce(),i.isPlaying||i.play(this.frameRate,!1)):i.onComplete.addOnce(function(){e.getCurrentAnimation().stop()})},t.prototype.animateMovement=function(t,e){var i=this.getCurrentAnimation();i.isPlaying&&i.name===t?i.reverseOnce():i.isPlaying?i.onComplete.addOnce(function(){return e()}):this.shipSprite.animations.play(t,this.frameRate,!1)},t.prototype.getCurrentAnimation=function(){return this.shipSprite.animations.currentAnim},t.prototype.moveUp=function(){this.shipSprite.y-=this.speed},t.prototype.moveDown=function(){this.ship.y+=this.speed},t.prototype.moveRight=function(){this.ship.x+=this.speed},t.prototype.moveLeft=function(){this.ship.x-=this.speed},t.prototype.initializeKeyToMovement=function(t){var e=this;this.keyToMovement.push({key:t.up,func:function(){return e.moveUp()}}),this.keyToMovement.push({key:t.down,func:function(){return e.moveDown()}}),this.keyToMovement.push({key:t.right,func:function(){return e.moveRight()}}),this.keyToMovement.push({key:t.left,func:function(){return e.moveLeft()}})},t.prototype.initializeAnimations=function(){var t=["start.png"].concat(Phaser.Animation.generateFrameNames("move-up-",1,7,".png",2)),e=["start.png"].concat(Phaser.Animation.generateFrameNames("move-down-",1,7,".png",2)),i=["start.png"].concat(Phaser.Animation.generateFrameNames("move-up-",1,14,".png",2)),s=["start.png"].concat(Phaser.Animation.generateFrameNames("move-down-",1,16,".png",2));this.shipSprite.animations.add("moveUp",t,this.frameRate,!0),this.shipSprite.animations.add("moveUpFull",i,this.frameRate,!0),this.shipSprite.animations.add("moveDown",e,this.frameRate,!0),this.shipSprite.animations.add("moveDownFull",s,this.frameRate,!0)},t.prototype.initializeKeyEvents=function(t){var e=this;this.keys[t.up]=this.game.input.keyboard.addKey(t.up),this.keys[t.down]=this.game.input.keyboard.addKey(t.down),this.keys[t.up].onDown.add(function(){return e.upPressed()}),this.keys[t.up].onUp.add(function(t){return e.directionKeyReleased(t)}),this.keys[t.down].onUp.add(function(t){return e.directionKeyReleased(t)}),this.keys[t.down].onDown.add(function(){return e.downPressed()})},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{}],16:[function(t,e,i){"use strict";var s=t("../../weapon/Weapon"),n=t("../../weapon/DoubleBullet"),o=Phaser.Signal,a=function(){function t(t,e,i,a){var r=this;this.onEnemyKilled=new o,this.weapons=[new s["default"](t,"simpleBullet","simpleBullet"),new n["default"](t)],this.weapon=this.weapons[0],this.game=t,this.ship=e,this.sparkSprite=i,this.keySchema=a,this.initializeAnimations(),this.weapons.forEach(function(t){return t.onEnemyKilled.add(function(t){t.ship=r.ship,r.onEnemyKilled.dispatch(t)})})}return t.prototype.updateFire=function(){this.game.input.keyboard.isDown(this.keySchema.fire)&&this.fire()},t.prototype.fire=function(){this.animateSpark(),this.weapon.fire(this.getPosition())},t.prototype.animateSpark=function(){var t=this;this.sparkSprite.animations.currentAnim.isPlaying||(this.sparkSprite.visible=!0,this.sparkSprite.animations.play("fire").onComplete.addOnce(function(){return t.sparkSprite.visible=!1}))},t.prototype.getPosition=function(){var t=this.sparkSprite.parent;return{x:t.body.x+140,y:t.body.y+35}},t.prototype.initializeAnimations=function(){this.sparkSprite.animations.add("fire",Phaser.Animation.generateFrameNames("fire_spark_",1,4,".png"),20)},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"../../weapon/DoubleBullet":18,"../../weapon/Weapon":19}],17:[function(t,e,i){"use strict";var s=function(){function t(){}return t.create=function(e,i,s,n,o,a,r,h,p,l){return void 0===a&&(a=0),void 0===r&&(r=0),void 0===h&&(h=0),void 0===p&&(p=0),void 0===l&&(l=!1),t._image=e.cache.getImage(n),"string"==typeof o?t._frame=e.cache.getFrameByName(n,o):t._frame=e.cache.getFrameByIndex(n,o),t.calculateNineImage(i,s,a,r,h,p,l),t._nineImage=new Phaser.BitmapData(e,"NineImage"+t._textureKey++,t._width,t._height),t.renderNineImage(),t._nineImage},t.calculateNineImage=function(e,i,s,n,o,a,r){var h=t._frame;if(t._centralWidth=h.width-n-a,t._centralHeight=h.height-s-o,r)t._horizontalRepeats=e,t._verticalRepeats=i,t._width=n+a+t._centralWidth*e,t._height=s+o+t._centralHeight*i,t._lastWidth=0,t._lastHeight=0;else{var p=e-n-a;t._horizontalRepeats=Math.floor(p/t._centralWidth),t._lastWidth=p%t._centralWidth;var l=i-s-o;t._verticalRepeats=Math.floor(l/t._centralHeight),t._lastHeight=l%t._centralHeight,t._width=e,t._height=i}t._leftWidth=n,t._rightWidth=a,t._topHeight=s,t._bottomHeight=o},t.renderNineImage=function(){var e=t._frame.y,i=0;t._topHeight>0&&(t.renderNineImageRow(t._image,e,i,t._topHeight),e+=t._topHeight,i+=t._topHeight);for(var s=0;s<t._verticalRepeats;s++)t.renderNineImageRow(t._image,e,i,t._centralHeight),i+=t._centralHeight;t._lastHeight>0&&(t.renderNineImageRow(t._image,e,i,t._lastHeight),i+=t._lastHeight),e+=t._centralHeight,t._bottomHeight>0&&t.renderNineImageRow(t._image,e,i,t._bottomHeight)},t.renderNineImageRow=function(e,i,s,n){var o=t._frame.x,a=0;t._leftWidth>0&&(t._nineImage.copy(e,o,i,t._leftWidth,n,a,s),a+=t._leftWidth,o+=t._leftWidth);for(var r=0;r<t._horizontalRepeats;r++)t._nineImage.copy(e,o,i,t._centralWidth,n,a,s),a+=t._centralWidth;t._lastWidth>0&&(t._nineImage.copy(e,o,i,t._lastWidth,n,a,s),a+=t._lastWidth),o+=t._centralWidth,t._rightWidth>0&&t._nineImage.copy(e,o,i,t._rightWidth,n,a,s)},t._textureKey=0,t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{}],18:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./Weapon"),o=function(t){function e(e){t.call(this,e,"doubleBullet","simpleBullet",30)}return s(e,t),e.prototype.fire=function(t){if(!(this.game.time.time<this.nextFire)){var e=t.body.x+140,i=t.body.y+35;this.sound.play(),this.getFirstExists(!1).fire(e,i,0,this.projectileSpeed,0,0),this.getFirstExists(!1).fire(e,i-15,0,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./Weapon":19}],19:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Group,o=t("./projectile"),a=Phaser.Signal,r=function(t){function e(e,i,s,n){var r=this;void 0===n&&(n=30),t.call(this,e,e.world,i,!1,!0,Phaser.Physics.ARCADE),this.nextFire=0,this.projectileSpeed=1200,this.fireRate=300,this.onEnemyKilled=new a,this.sound=e.add.sound("ship.zidan");for(var h=0;n>h;h++){var p=new o["default"](e,s);p.onEnemyKilled.add(function(t){return r.onEnemyKilled.dispatch(t)}),this.add(p,!0)}}return s(e,t),e.prototype.fire=function(t){if(!(this.game.time.time<this.nextFire)){this.sound.play();var e=t.x,i=t.y;this.getFirstExists(!1).fire(e,i,0,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{"./projectile":20}],20:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Sprite,o=function(t){function e(e,i){t.call(this,e,0,0,"ship.weapons",i+".png"),this.texture.baseTexture.scaleMode=PIXI.scaleModes.NEAREST,this.onEnemyKilled=new Phaser.Signal,this.anchor.set(.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.exists=!1}return s(e,t),e.prototype.fire=function(t,e,i,s,n,o){var a=this.body;n=n||0,o=o||0,this.reset(t,e),this.scale.set(1),this.game.physics.arcade.velocityFromAngle(i,s,a.velocity),this.angle=i,a.gravity.set(n,o)},e.prototype.update=function(){var t=this;this.game.world.getByName("monsters").forEachAlive(function(e){t.game.physics.arcade.collide(t,e)&&(e.damage(1),e.alive||t.onEnemyKilled.dispatch({monster:e}),t.kill())},this)},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}]},{},[5]);