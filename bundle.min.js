!function t(e,i,s){function n(a,r){if(!i[a]){if(!e[a]){var p="function"==typeof require&&require;if(!r&&p)return p(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return n(i?i:t)},u,u.exports,t,e,i,s)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.preload=function(){this.game.load.image("preloader","assets/preloader.gif")},e.prototype.create=function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0),this.game.state.start("preloader")},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{}],2:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./ship/ship"),o=Phaser.Keyboard,a=Phaser.Key,r=t("./weapon/Weapon"),p=t("./weapon/DoubleBullet"),h=t("./monsters/dayanguai"),u=t("./monsters/haimian"),l=function(t){function e(){t.apply(this,arguments),this.keys={Key:a}}return s(e,t),e.prototype.create=function(){this.game.physics.startSystem(Phaser.Physics.ARCADE);for(var t=700,e=0;3>e;e++,t-=300){for(var i=h.default.generatePathPoints(700,t),s=1;5>s;s++){var o=100*s+700;i.x.unshift(o),i.y.unshift(t),new h.default(this.game,o,t,i)}new u.default(this.game,t)}this.weapons=[new r.default(this.game,"simpleBullet","simpleBullet"),new p.default(this.game)],this.ship=new n.default(this.game),this.ship.setWeapon(this.weapons[0]);var a=this.game.add.sound("mission_1_loop",.5);this.game.add.sound("mission_1_intro",.5).play().onStop.addOnce(function(){a.loopFull()}),this.ship.spawn()},e.prototype.update=function(){this.game.input.keyboard.isDown(o.ENTER)&&this.ship.setWeapon(this.weapons[1])},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i.default=l},{"./monsters/dayanguai":5,"./monsters/haimian":9,"./ship/ship":12,"./weapon/DoubleBullet":13,"./weapon/Weapon":14}],3:[function(t,e,i){"use strict";var s=t("./boot"),n=t("./preloader"),o=t("./menu"),a=t("./game"),r=new Phaser.Game(1280,800,Phaser.AUTO,"salamander-game");r.state.add("boot",new s.default),r.state.add("preloader",new n.default),r.state.add("menu",new o.default),r.state.add("game",new a.default),r.state.start("boot")},{"./boot":1,"./game":2,"./menu":4,"./preloader":11}],4:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.create=function(){var t=this.game.add.text(.5*this.game.width,.5*this.game.height,"MENU",{font:"42px Arial",fill:"#ffffff",align:"center"});t.anchor.set(.5),this.game.input.onDown.add(this.onInputDown,this)},e.prototype.update=function(){},e.prototype.onInputDown=function(){this.game.state.start("game")},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{}],5:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Math,o=t("./monster"),a=function(t){function e(e,i,s,n,o){void 0===o&&(o="red"),t.call(this,e,i,s,"monsters.dayanguai",o+"Eye.png"),this.path=[],this.pathIndex=0,this.initializeSprites(e,o),this.initializePath(e,n)}return s(e,t),e.generatePathPoints=function(t,e){for(var i={x:[],y:[]},s=0;15>s;s++)i.x.push(t),i.y.push(e),t+=this.movementStatesX[s%this.movementStatesX.length],e+=this.movementStatesY[s%this.movementStatesY.length];return i},e.prototype.initializeSprites=function(t,e){t.world.addChild(this),t.physics.arcade.enable(this),this.scale.set(.9,.9),this.topShell=t.add.sprite(27,0,"monsters.dayanguai",e+"Shell.png"),this.bottomShell=t.add.sprite(27,59,"monsters.dayanguai",e+"Shell.png"),this.addChild(this.topShell),this.addChild(this.bottomShell),this.topShell.anchor.set(.5,.5),this.bottomShell.anchor.set(.5,.5),this.bottomShell.angle=180,t.add.tween(this.topShell).to({y:5},500,Phaser.Easing.Bounce.InOut,!0,0,1/0,!0),t.add.tween(this.bottomShell).to({y:64},500,Phaser.Easing.Bounce.InOut,!0,0,1/0,!0)},e.prototype.initializePath=function(t,e){for(var i=1/t.width,s=0;1>=s;s+=i){var o=n.linearInterpolation(e.x,s),a=n.linearInterpolation(e.y,s);this.path.push({x:o,y:a})}},e.movementStatesX=[-230,150],e.movementStatesY=[0,-150],e}(o.default);Object.defineProperty(i,"__esModule",{value:!0}),i.default=a},{"./monster":10}],6:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./explostion"),o=function(t){function e(e){t.call(this,e,"ship.blue","explosion_blue",6,35)}return s(e,t),e.prototype.destroy=function(){this.reset()},e}(n.default);Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},{"./explostion":7}],7:[function(t,e,i){"use strict";var s=function(){function t(t,e,i,s,n){var o=e+"Explosion";this.aperture=t.add.sprite(-999,-999,o),this.smoke=t.add.sprite(-999,-999,o),this.aperture.anchor.set(.5,.5),this.smoke.anchor.set(.5,.5),this.aperture.animations.add("boom",Phaser.Animation.generateFrameNames(i+"_aperture_",1,s,".png"),20),this.smoke.animations.add("boom",Phaser.Animation.generateFrameNames(i+"_smoke_",1,n,".png"),15),this.sound=t.add.sound(o)}return t.prototype.play=function(t,e){var i=this;void 0===e&&(e=function(){}),this.smoke.animations.currentAnim.isPlaying||(this.sound&&!this.sound.isPlaying&&this.sound.play(),this.aperture.x=t.x,this.aperture.y=t.y,this.smoke.x=t.x,this.smoke.y=t.y,this.aperture.animations.play("boom").onComplete.addOnce(function(){return i.aperture.visible=!1}),this.smoke.animations.play("boom").onComplete.addOnce(function(){e(),i.destroy()}))},t.prototype.reset=function(){this.aperture.position.set(-999,-999),this.smoke.position.set(-999,-999)},t.prototype.destroy=function(){this.aperture.destroy(),this.smoke.destroy()},t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{}],8:[function(t,e,i){"use strict";function s(t){return new o.default(t,"green","green",6,33)}function n(t){return new a.default(t)}var o=t("./explostion"),a=t("./blueExplosion");i.createGreen=s,i.createBlue=n},{"./blueExplosion":6,"./explostion":7}],9:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./monster"),o=function(t){function e(e,i){t.call(this,e,9999,i,"monsters.haimian"),this.path=[],this.pathIndex=0,this.health=1,this.maxHealth=1;for(var s=this.game.width+100,n=Phaser.Math.sinCosGenerator(s,30,1,15).cos,o=0;s>o;o++)this.path.push({x:o,y:i+n[o]});this.initializeSprites(e),this.animations.add("move",Phaser.Animation.generateFrameNames("haimian_",1,5,".png"),7,!0)}return s(e,t),e.prototype.update=function(){t.prototype.update.call(this),this.animations.currentAnim.isPlaying||this.animations.play("move")},e.prototype.initializeSprites=function(t){t.world.addChild(this),t.physics.arcade.enable(this),this.scale.set(.9,.9)},e}(n.default);Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},{"./monster":10}],10:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Sprite,o=t("./death/explostions"),a=function(t){function e(e,i,s,n,a){var r=this;void 0===a&&(a=void 0),t.call(this,e,i,s,n,a),this.path=[],this.pathIndex=0,this.health=1,this.maxHealth=1,this.death=o.createGreen(e),this.checkWorldBounds=!0,this.events.onOutOfBounds.add(function(){r.destroy()})}return s(e,t),e.prototype.update=function(){var t=this;this.alive?(this.x=this.path[this.pathIndex].x,this.y=this.path[this.pathIndex].y,this.pathIndex++):this.death.play(this,function(){return t.destroy()})},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i.default=a},{"./death/explostions":8}],11:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments),this.ready=!1}return s(e,t),e.prototype.preload=function(){this.asset=this.game.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.game.load.setPreloadSprite(this.asset),this.game.load.atlasJSONHash("ship","/assets/ship.png","/assets/ship.json"),this.game.load.atlasJSONHash("ship.weapons","/assets/ship.weapons.png","/assets/ship.weapons.json"),this.game.load.atlasJSONHash("greenExplosion","/assets/greenExplosion.png","/assets/greenExplosion.json"),this.game.load.atlasJSONHash("ship.blueExplosion","/assets/ship.blueExplosion.png","/assets/ship.blueExplosion.json"),this.game.load.atlasJSONHash("monsters.dayanguai","/assets/monster_dayanguai.png","/assets/monster_dayanguai.json"),this.game.load.atlasJSONHash("monsters.haimian","/assets/monster_haimian.png","/assets/monster_haimian.json"),this.game.load.image("ship.trail","/assets/ship.trail.png"),this.game.load.audio("ship.blueExplosion","/assets/audio/ship.blueExplosion.mp3"),this.game.load.audio("ship.zidan","/assets/audio/ship_zidan_sound.mp3"),this.game.load.audio("mission_1_intro","/assets/audio/sound-mission-1-intro.mp3"),this.game.load.audio("mission_1_loop","/assets/audio/sound-mission-1-loop.mp3"),this.ready=!0},e.prototype.loadResources=function(){},e.prototype.create=function(){},e.prototype.update=function(){this.game.state.start("menu")},e.prototype.onLoadComplete=function(){},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i.default=n},{}],12:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Keyboard,o=Phaser.Group,a=t("../monsters/death/explostions"),r=function(t){function e(e){t.call(this,e),this.keys=[],this.keyToMovement=[],this.frameRate=50,this.speed=4,this.isSpawning=!1,this.spawnEndPoint={x:e.width/3,y:e.world.centerY},this.explosion=a.createBlue(e),this.initializeSprites(),this.initializeKeyEvents(),this.initializeKeyToMovement(),this.initializeAnimations()}return s(e,t),e.prototype.spin=function(){var t=this;if(!this.sprite.animations.currentAnim.isPlaying){var e=this.sprite.animations.getAnimation("moveUpFull"),i=this.sprite.animations.getAnimation("moveDownFull"),s=3*this.frameRate;e.play(s,!1).onComplete.addOnce(function(){t.sprite.scale.setTo(1,-1),e.reverseOnce().play(s,!1).onComplete.addOnce(function(){i.play(s,!1).onComplete.addOnce(function(){t.sprite.scale.setTo(1,1),i.reverseOnce().play(s,!1)})})})}},e.prototype.upPressed=function(){var t=this;this.animateMovement("moveUp",function(){return t.upPressed()})},e.prototype.downPressed=function(){var t=this;this.animateMovement("moveDown",function(){return t.downPressed()})},e.prototype.directionKeyReleased=function(t){var e=this,i=this.getCurrentAnimation();"moveUp"===i.name&&t.keyCode===n.W||"moveDown"===i.name&&t.keyCode===n.S?(i.reverseOnce(),i.isPlaying||i.play(this.frameRate,!1)):i.onComplete.addOnce(function(t){e.getCurrentAnimation().stop()})},e.prototype.animateMovement=function(t,e){var i=this.getCurrentAnimation();i.isPlaying&&i.name===t?i.reverseOnce():i.isPlaying?i.onComplete.addOnce(function(){return e()}):this.sprite.animations.play(t,this.frameRate,!1)},e.prototype.animateSpark=function(){var t=this;this.sparkSprite.animations.currentAnim.isPlaying||(this.sparkSprite.visible=!0,this.sparkSprite.animations.play("fire").onComplete.addOnce(function(){return t.sparkSprite.visible=!1}))},e.prototype.setWeapon=function(t){this.weapon=t},e.prototype.moveUp=function(){this.y-=this.speed},e.prototype.moveDown=function(){this.y+=this.speed},e.prototype.moveRight=function(){this.x+=this.speed},e.prototype.moveLeft=function(){this.x-=this.speed},e.prototype.fire=function(){this.animateSpark(),this.weapon.fire(this.sprite)},e.prototype.spawn=function(){this.resetToMiddleLeft(),this.isSpawning=!0,this.sprite.revive(1)},e.prototype.resetToMiddleLeft=function(){this.position.set(0,this.game.world.centerY)},e.prototype.update=function(){this.isSpawning?(this.yetToReachSpawnPoint()?(this.getCurrentAnimation().isPlaying||this.spin(),this.x+=3*this.speed):this.isSpawning=!1,this.checkCollisions()):this.sprite.alive?(this.checkCollisions(),this.checkForMovement()):this.respawn()},e.prototype.respawn=function(){this.explosion.play(this.sprite.body),this.spawn()},e.prototype.checkForMovement=function(){for(var t=0,e=this.keyToMovement;t<e.length;t++){var i=e[t];this.game.input.keyboard.isDown(i.key)&&i.func()}},e.prototype.checkCollisions=function(){var t=this;this.game.world.forEachAlive(function(e){e.key&&e.key.startsWith("monsters")&&t.game.physics.arcade.collide(t,e)&&(t.isSpawning?e.kill():t.sprite.kill())},this)},e.prototype.yetToReachSpawnPoint=function(){return this.x<=this.spawnEndPoint.x&&this.y<=this.spawnEndPoint.y},e.prototype.getCurrentAnimation=function(){return this.sprite.animations.currentAnim},e.prototype.initializeSprites=function(){this.initializeShipSprite(),this.initializeSparkSprite(),this.initializeTrail()},e.prototype.initializeShipSprite=function(){this.sprite=this.game.add.sprite(0,0,"ship","start.png",this),this.game.physics.arcade.enable(this.sprite),this.sprite.anchor.setTo(.5),this.sprite.body.collideWorldBounds=!0},e.prototype.initializeSparkSprite=function(){this.sparkSprite=this.game.add.sprite(60,6,"ship.weapons"),this.sprite.addChild(this.sparkSprite),this.sparkSprite.anchor.set(.5,.5),this.sparkSprite.scale.set(.95),this.sparkSprite.visible=!1},e.prototype.initializeTrail=function(){var t=this.game.add.sprite(-38,8,"ship.trail");t.scale.set(.7),t.anchor.set(1,.5),this.sprite.addChild(t),this.game.add.tween(t.scale).to({x:.5,y:.2},250,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(t).to({alpha:.8},250,Phaser.Easing.Exponential.InOut,!0,0,1/0,!0)},e.prototype.initializeAnimations=function(){var t=["start.png"].concat(Phaser.Animation.generateFrameNames("move-up-",1,7,".png",2)),e=["start.png"].concat(Phaser.Animation.generateFrameNames("move-down-",1,7,".png",2)),i=["start.png"].concat(Phaser.Animation.generateFrameNames("move-up-",1,14,".png",2)),s=["start.png"].concat(Phaser.Animation.generateFrameNames("move-down-",1,16,".png",2));this.sprite.animations.add("moveUp",t,this.frameRate,!0),this.sprite.animations.add("moveUpFull",i,this.frameRate,!0),this.sprite.animations.add("moveDown",e,this.frameRate,!0),this.sprite.animations.add("moveDownFull",s,this.frameRate,!0),this.sparkSprite.animations.add("fire",Phaser.Animation.generateFrameNames("fire_spark_",1,4,".png"),20)},e.prototype.initializeKeyToMovement=function(){var t=this;this.keyToMovement.push({key:n.W,func:function(){return t.moveUp()}}),this.keyToMovement.push({key:n.S,func:function(){return t.moveDown()}}),this.keyToMovement.push({key:n.D,func:function(){return t.moveRight()}}),this.keyToMovement.push({key:n.A,func:function(){return t.moveLeft()}}),this.keyToMovement.push({key:n.SPACEBAR,func:function(){return t.fire()}})},e.prototype.initializeKeyEvents=function(){var t=this;this.keys[n.W]=this.game.input.keyboard.addKey(n.W),this.keys[n.S]=this.game.input.keyboard.addKey(n.S),this.keys[n.W].onDown.add(function(){return t.upPressed()}),this.keys[n.W].onUp.add(function(e){return t.directionKeyReleased(e)}),this.keys[n.S].onUp.add(function(e){return t.directionKeyReleased(e)}),this.keys[n.S].onDown.add(function(){return t.downPressed()})},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i.default=r},{"../monsters/death/explostions":8}],13:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./Weapon"),o=function(t){function e(e){t.call(this,e,"doubleBullet","simpleBullet",30)}return s(e,t),e.prototype.fire=function(t){if(!(this.game.time.time<this.nextFire)){var e=t.body.x+140,i=t.body.y+35;this.sound.play(),this.getFirstExists(!1).fire(e,i,0,this.projectileSpeed,0,0),this.getFirstExists(!1).fire(e,i-15,0,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e}(n.default);Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},{"./Weapon":14}],14:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Group,o=t("./projectile"),a=function(t){function e(e,i,s,n){void 0===n&&(n=30),t.call(this,e,e.world,i,!1,!0,Phaser.Physics.ARCADE),this.nextFire=0,this.projectileSpeed=800,this.fireRate=300,this.sound=e.add.sound("ship.zidan");for(var a=0;n>a;a++)this.add(new o.default(e,s),!0)}return s(e,t),e.prototype.fire=function(t){if(!(this.game.time.time<this.nextFire)){this.sound.play();var e=t.body.x+140,i=t.body.y+35;this.getFirstExists(!1).fire(e,i,0,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i.default=a},{"./projectile":15}],15:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Sprite,o=function(t){function e(e,i){t.call(this,e,0,0,"ship.weapons",i+".png"),this.texture.baseTexture.scaleMode=PIXI.scaleModes.NEAREST,this.anchor.set(.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.exists=!1}return s(e,t),e.prototype.fire=function(t,e,i,s,n,o){var a=this.body;n=n||0,o=o||0,this.reset(t,e),this.scale.set(1),this.game.physics.arcade.velocityFromAngle(i,s,a.velocity),this.angle=i,a.gravity.set(n,o)},e.prototype.update=function(){var t=this;this.game.world.forEachAlive(function(e){e.key&&e.key.startsWith("monsters")&&t.game.physics.arcade.collide(t,e)&&(e.damage(1),t.kill())},this)},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i.default=o},{}]},{},[3]);