!function t(e,i,s){function o(a,r){if(!i[a]){if(!e[a]){var p="function"==typeof require&&require;if(!r&&p)return p(a,!0);if(n)return n(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return o(i?i:t)},u,u.exports,t,e,i,s)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.preload=function(){this.game.load.image("preloader","assets/preloader.gif"),this.game.load.json("map1Data","/assets/stages/1/map.json")},e.prototype.create=function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0),this.game.state.start("preloader")},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}],2:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./monsters/dayanguai"),n=Phaser.Key,a=t("./monsters/haimian"),r=t("./stage/enviromentObstacle"),p=t("./stage/stage"),h=function(t){function e(){t.apply(this,arguments),this.keys={Key:n}}return s(e,t),e.prototype.create=function(){t.prototype.create.call(this),this.ship.spawn()},e.prototype.createMonsters=function(){var t=this;this.objectLayers.foreground.getObjectsByName("dayanguai").forEach(function(e){t.addEvent(function(){return t.objectLayers.foreground.inBounds(e.x,e.y)},function(){var i=o["default"].generatePathPoints(700,e.y);i.x.unshift(t.game.world.width),i.y.unshift(e.y);var s=new o["default"](t.game,t.game.world.centerX,t.game.world.centerY,i);t.game.world.getByName("monsters").add(s,!1)})}),this.objectLayers.foreground.getObjectsByName("haimian").forEach(function(e){t.addEvent(function(){return t.objectLayers.foreground.inBounds(e.x,e.y)},function(){return t.game.world.getByName("monsters").add(new a["default"](t.game,e.y),!1)})})},e.prototype.createEnvironment=function(){var t=this;this.objectLayers.foreground.createFromObjects("redAllgy1",function(e){return new r["default"](t.game,e,"stage1Environment","roubi1_",15)}),this.objectLayers.foreground.createFromObjects("redAllgy2",function(e){return new r["default"](t.game,e,"stage1Environment","roubi2_",15)})},e.prototype.playStageMusic=function(){var t=this.game.add.sound("mission_1_loop",.5);this.game.add.sound("mission_1_intro",.5).play().onStop.addOnce(function(){t.loopFull()})},e.prototype.update=function(){t.prototype.update.call(this)},e}(p["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=h},{"./monsters/dayanguai":16,"./monsters/haimian":21,"./stage/enviromentObstacle":32,"./stage/stage":34}],3:[function(t,e,i){"use strict";var s=t("./playerDetails"),o=t("./upgradeCounter"),n=function(){function t(t,e){var i=this;this.ship=e,this.playerDetails=new s["default"](t),this.upgradeCounter=new o["default"](t,e),this.ship.onEnemyKilled.add(function(t){return i.playerDetails.addToScore(t.monster.getPoints())}),this.ship.onUpgradePickup.add(function(){return i.upgradeCounter.selectNext()}),this.ship.onDeath.add(function(){return i.shipDied()})}return t.prototype.multiplayerMode=function(t){void 0===t&&(t=!0),this.upgradeCounter.scale.set(.6),this.upgradeCounter.y=this.playerDetails.height+10,t?(this.playerDetails.x+=70,this.upgradeCounter.x=200):(this.playerDetails.scale.set(-1,1),this.playerDetails.x=this.ship.game.width-70,this.upgradeCounter.x=this.ship.game.width-210)},t.prototype.shipDied=function(){this.upgradeCounter.completeReset(),this.playerDetails.addToLives(-1)},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./playerDetails":5,"./upgradeCounter":7}],4:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Group,n=function(t){function e(e,i,s,o,n,a,r){void 0===s&&(s=0),void 0===o&&(o=0),void 0===n&&(n=""),void 0===a&&(a=1/0),void 0===r&&(r=-1),t.call(this,e),this.dirty=!0,this.tag=i,this.maxChars=a,this.text=n,this.x=s,this.y=o,-1===r&&(this.textHight=this.game.cache.getImage(i).height)}return s(e,t),e.prototype.setText=function(t){this.dirty=this.text!==t,this.text=t,this.update()},e.prototype.update=function(){if(this.dirty){this.dirty=!1,this.forEachAlive(function(t){return t.kill()},this);for(var t=0,e=0,i=void 0,s=0,o=this.text;s<o.length;s++){var n=o[s];i=this.getFirstDead(!0,t,e,this.tag,n),i.revive(),t+=i.width}}},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],5:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("../utils/NineImage"),n=Phaser.Sprite,a=t("./textAsImage"),r=function(t){function e(i){t.call(this,i,0,0,o["default"].create(i,295,77,"playerPanel",0,0,0,80,60)),this.score=0,this.lives=2,i.world.add(this);var s=this.createPlayerIcon(i,"player1_icon"),n=e.createPlayerIconBackground(i,"playerIconBackground"),a=e.createLivesIconBackground(i,s,"lives_icon"),r=e.createXIconBackground(i,a,s,"lives_X");this.createTextAsImages(i,s,r),this.addChild(n),this.addChild(s),this.addChild(a),this.addChild(r),this.addChild(this.scoreText),this.addChild(this.livesText),this.scoreText.update(),this.livesText.update()}return s(e,t),e.prototype.createTextAsImages=function(t,e,i){this.scoreText=new a["default"](t,"score_numbers",e.width+5,5,this.buildFormattedScore()),this.livesText=new a["default"](t,"score_numbers",i.x+i.width,e.height/2+10,this.lives.toString()),this.livesText.scale.set(.9,.9)},e.createPlayerIconBackground=function(t,e){var i=t.add.sprite(-7,-1.5,e);return i.width=83,i.height=83,i},e.prototype.createPlayerIcon=function(t,e){var i=t.add.sprite(2,5,e);return i.width=63,i.height=63,i},e.createLivesIconBackground=function(t,e,i){var s=t.add.sprite(e.width+15,e.height/2+5,i);return s.scale.set(.65,.65),s},e.createXIconBackground=function(t,e,i){var s=t.add.sprite(e.x+e.width+8,i.height/2+13,"lives_X");return s.scale.set(1.1,1.1),s},e.prototype.addToScore=function(t){this.score+=t,this.scoreText.setText(this.buildFormattedScore())},e.prototype.addToLives=function(t){this.lives+=t,this.livesText.setText(this.lives.toString()),this.lives<0&&alert("Dead bitch !")},e.prototype.buildFormattedScore=function(){for(var t=this.score.toString(),i="",s=t.length-1;s>=0;s--)i=e.thereShouldBeACommaHere(s,t)?","+(t[s]+i):t[s]+i;return i},e.thereShouldBeACommaHere=function(t,e){return t>0&&(e.length-t)%3===0},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{"../utils/NineImage":36,"./textAsImage":6}],6:[function(t,e,i){arguments[4][4][0].apply(i,arguments)},{dup:4}],7:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Sprite,n=Phaser.Image,a=Phaser.Keyboard,r=t("./upgradePresentor/missilePresentor"),p=t("./upgradePresentor/rippliePresentor"),h=t("./upgradePresentor/laserPresentor"),u=t("./upgradePresentor/optionPresentor"),l=t("./upgradePresentor/forcePresentor"),c=t("./upgradePresentor/upgradePresentor"),d=function(t){function e(e,i){var s=this;t.call(this,e,e.world.centerX,e.height-40),this.selectedIndex=-1,this.upgradeKey=a.SHIFT,e.world.add(this),this.ship=i,this.upgradeSound=e.add.sound("upgrade"),this.addChild(new n(e,-340,0,"upgradeCounterLeft")),this.addChild(new n(e,47,0,"upgradeCounterRight")),this.presentors=[r["default"],p["default"],h["default"],u["default"],l["default"]].map(function(t,i){return s.addChild(new t(e,-315+i*c["default"].WIDTH,-5))})}return s(e,t),e.prototype.selectNext=function(){-1!=this.selectedIndex&&this.presentors[this.selectedIndex].deSelect(),this.selectedIndex=++this.selectedIndex%this.presentors.length,this.presentors[this.selectedIndex].select()},e.prototype.update=function(){if(this.viableForUpgrade()){var t=this.getSelected();t.upgrade(this.ship),t.deSelect(),this.upgradeSound.play(),this.resetCounter()}},e.prototype.resetCounter=function(){-1!==this.selectedIndex&&(this.getSelected().deSelect(),this.selectedIndex=-1)},e.prototype.completeReset=function(){this.resetCounter(),this.presentors.forEach(function(t){return t.resetLevel()})},e.prototype.viableForUpgrade=function(){return this.game.input.keyboard.isDown(this.upgradeKey)&&-1!==this.selectedIndex&&!this.getSelected().maxedOut()},e.prototype.getSelected=function(){return this.presentors[this.selectedIndex]},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=d},{"./upgradePresentor/forcePresentor":8,"./upgradePresentor/laserPresentor":9,"./upgradePresentor/missilePresentor":10,"./upgradePresentor/optionPresentor":11,"./upgradePresentor/rippliePresentor":12,"./upgradePresentor/upgradePresentor":13}],8:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./upgradePresentor"),n=function(t){function e(e,i,s){t.call(this,e,i,s,"FORCE",2,"force")}return s(e,t),e.prototype.upgrade=function(e){t.prototype.upgrade.call(this,e),e.activateForce()},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./upgradePresentor":13}],9:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./upgradePresentor"),n=function(t){function e(e,i,s){t.call(this,e,i,s,"LASER",2,"laser")}return s(e,t),e.prototype.upgrade=function(e){t.prototype.upgrade.call(this,e),e.upgradeLaser()},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./upgradePresentor":13}],10:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./upgradePresentor"),n=function(t){function e(e,i,s){t.call(this,e,i,s,"MISSILE",2,"missile")}return s(e,t),e.prototype.upgrade=function(e){this.maxedOut()||e.upgradeRockets(),t.prototype.upgrade.call(this,e)},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./upgradePresentor":13}],11:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./upgradePresentor"),n=function(t){function e(e,i,s){t.call(this,e,i,s,"OPTION",2,"option")}return s(e,t),e.prototype.upgrade=function(e){t.prototype.upgrade.call(this,e),e.addOption()},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./upgradePresentor":13}],12:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./upgradePresentor"),n=function(t){function e(e,i,s){t.call(this,e,i,s,"RIPPLE",2,"ripple")}return s(e,t),e.prototype.upgrade=function(e){t.prototype.upgrade.call(this,e),e.upgradeRipple()},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./upgradePresentor":13}],13:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Sprite,n=function(t){function e(e,i,s,o,n,a){t.call(this,e,i,s,"upgradePresentor","unselected"),this.level=0,e.world.add(this),this.sound=e.add.sound("upgrade_"+a),this.maxLevel=n,this.text=this.game.add.text(this.width/2,this.height/2+3,o,{font:"good_timesregular",fontSize:15,fill:"#FFFFFF",stroke:"#1391eb",strokeThickness:2}),this.text.anchor.set(.5,.5),this.addChild(this.text)}return s(e,t),e.prototype.select=function(){this.frameName="selected"},e.prototype.deSelect=function(){this.frameName="unselected"},e.prototype.upgrade=function(){this.sound.play(),this.level++,this.disableIfMaxedOut()},e.prototype.maxedOut=function(){return this.level===this.maxLevel},e.prototype.resetLevel=function(){this.level=0},e.prototype.disableIfMaxedOut=function(){this.maxedOut()&&(this.text.visible=!1)},e.WIDTH=131,e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],14:[function(t){"use strict";var e=t("./boot"),i=t("./preloader"),s=t("./menu"),o=t("./game"),n=new Phaser.Game("100%","100%",Phaser.AUTO,"salamander-game");n.state.add("boot",new e["default"]),n.state.add("preloader",new i["default"]),n.state.add("menu",new s["default"]),n.state.add("game",new o["default"]("map1","/assets/stages/1/")),n.state.start("boot")},{"./boot":1,"./game":2,"./menu":15,"./preloader":23}],15:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.create=function(){var t=this.game.add.text(.5*this.game.width,.5*this.game.height,"MENU",{font:"42px Arial",fill:"#ffffff",align:"center"});t.anchor.set(.5),this.game.input.onDown.add(this.onInputDown,this)},e.prototype.update=function(){},e.prototype.onInputDown=function(){this.game.state.start("game")},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}],16:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Math,n=t("./monster"),a=function(t){function e(e,i,s,o,n){void 0===n&&(n="red"),t.call(this,e,i,s,"monsters.dayanguai",90,n+"Eye.png"),this.initializeSprites(e,n),this.initializePath(e,o)}return s(e,t),e.generatePathPoints=function(t,e){for(var i={x:[],y:[]},s=0;15>s;s++)i.x.push(t),i.y.push(e),t+=this.movementStatesX[s%this.movementStatesX.length],e+=this.movementStatesY[s%this.movementStatesY.length];return i},e.prototype.initializeSprites=function(t,e){t.world.addChild(this),this.scale.set(.9,.9),this.topShell=t.add.sprite(27,0,"monsters.dayanguai",e+"Shell.png"),this.bottomShell=t.add.sprite(27,59,"monsters.dayanguai",e+"Shell.png"),this.addChild(this.topShell),this.addChild(this.bottomShell),this.topShell.anchor.set(.5,.5),this.bottomShell.anchor.set(.5,.5),this.bottomShell.angle=180,t.add.tween(this.topShell).to({y:5},500,Phaser.Easing.Bounce.InOut,!0,0,1/0,!0),t.add.tween(this.bottomShell).to({y:64},500,Phaser.Easing.Bounce.InOut,!0,0,1/0,!0)},e.prototype.initializePath=function(t,e){for(var i=1/t.width,s=0;1>=s;s+=i){var n=o.linearInterpolation(e.x,s),a=o.linearInterpolation(e.y,s);this.path.push({x:n,y:a})}},e.movementStatesX=[-230,150],e.movementStatesY=[0,-150],e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./monster":22}],17:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./explostion"),n=function(t){function e(e){t.call(this,e,"ship.blue","explosion_blue",6,35)}return s(e,t),e.prototype.destroy=function(){this.reset()},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./explostion":18}],18:[function(t,e,i){"use strict";var s=function(){function t(t,e,i,s,o){var n=e+"Explosion";this.aperture=t.add.sprite(-999,-999,n),this.smoke=t.add.sprite(-999,-999,n),this.aperture.anchor.set(.5,.5),this.smoke.anchor.set(.5,.5),this.aperture.animations.add("boom",Phaser.Animation.generateFrameNames(i+"_aperture_",1,s,".png"),20),this.smoke.animations.add("boom",Phaser.Animation.generateFrameNames(i+"_smoke_",1,o,".png"),15),this.sound=t.add.sound(n)}return t.prototype.play=function(t,e){var i=this;void 0===e&&(e=function(){}),this.smoke.animations.currentAnim.isPlaying||(this.sound&&!this.sound.isPlaying&&this.sound.play(),this.aperture.x=t.x,this.aperture.y=t.y,this.smoke.x=t.x,this.smoke.y=t.y,this.aperture.animations.play("boom").onComplete.addOnce(function(){return i.aperture.visible=!1}),this.smoke.animations.play("boom").onComplete.addOnce(function(){e(),i.kill()}))},t.prototype.reset=function(){this.aperture.position.set(-999,-999),this.smoke.position.set(-999,-999)},t.prototype.destroy=function(){this.aperture.destroy(),this.smoke.destroy()},t.prototype.kill=function(){this.aperture.kill(),this.smoke.kill()},t.prototype.revive=function(){this.aperture.revive(),this.smoke.revive()},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{}],19:[function(t,e,i){"use strict";function s(t){return new n["default"](t,"green","green",6,33)}function o(t){return new a["default"](t)}var n=t("./explostion"),a=t("./blueExplosion");i.createGreen=s,i.createBlue=o},{"./blueExplosion":17,"./explostion":18}],20:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Sprite,n=function(t){function e(e,i,s){t.call(this,e,-999,-999,"ship.weapons.explosions"),this.game.world.add(this),this.anchor.set(.5,.5),this.animations.add("boom",Phaser.Animation.generateFrameNames(i+"_explosion_",1,s),20)}return s(e,t),e.prototype.explode=function(t,e){var i=this;void 0===e&&(e=function(){}),this.animations.currentAnim.isPlaying||(this.visible=!0,this.x=t.world.x,this.y=t.world.y,this.animations.play("boom").onComplete.addOnce(function(){e(),i.visible=!1}))},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],21:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./monster"),n=function(t){function e(e,i){t.call(this,e,9999,i,"monsters.haimian",120),this.health=2,this.maxHealth=1;for(var s=this.game.width+100,o=Phaser.Math.sinCosGenerator(s,30,1,15).cos,n=0;s>n;n++)this.path.push({x:n,y:i+o[n]});this.initializeSprites(e),this.animations.add("move",Phaser.Animation.generateFrameNames("haimian_",1,5,".png"),7,!1)}return s(e,t),e.prototype.update=function(){var e=this;t.prototype.update.call(this),this.animations.currentAnim.isPlaying||this.animations.play("move").onComplete.addOnce(function(){e.animations.currentAnim.reverseOnce().play()})},e.prototype.initializeSprites=function(t){t.world.addChild(this),this.scale.set(.9,.9)},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./monster":22}],22:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Sprite,n=t("./death/explostions"),a=t("../gui/TextAsImage"),r=function(t){function e(e,i,s,o,r,p){var h=this;void 0===r&&(r=90),void 0===p&&(p=void 0),t.call(this,e,i,s,o,p),this.path=[],this.pathIndex=0,e.physics.arcade.enable(this),this.health=1,this.maxHealth=1,this.death=n.createGreen(e),this.pointsDisplay=new a["default"](e,"points_numbers",0,0,r.toString()),this.pointsDisplay.alpha=0,this.pointsTween=this.game.add.tween(this.pointsDisplay).to({},1e3,Phaser.Easing.Linear.None,!1,0,0),this.points=r,this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.events.onKilled.add(function(){return h.killed()})}return s(e,t),e.prototype.update=function(){this.alive&&(this.x=this.path[this.pathIndex].x,this.y=this.path[this.pathIndex].y,this.pathIndex++)},e.prototype.getPoints=function(){return this.points},e.prototype.playPoints=function(){this.pointsDisplay.alpha=1,this.pointsDisplay.position.set(this.x,this.y),this.pointsTween.updateTweenData("vEnd",{alpha:0,y:this.y-20}),this.pointsTween.start()},e.prototype.killed=function(){if(this.inWorld&&(this.death.play(this),this.playPoints(),Math.random()>=.75)){var t=this.game.world.getByName("upgrades").getFirstDead(!0,this.x,this.y);t.revive()}},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{"../gui/TextAsImage":4,"./death/explostions":19}],23:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=function(t){function e(){t.apply(this,arguments),this.ready=!1}return s(e,t),e.prototype.preload=function(){this.asset=this.game.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.game.load.setPreloadSprite(this.asset),this.game.load.atlasJSONHash("ship","/assets/ship.png","/assets/ship.json"),this.game.load.atlasJSONHash("ship.weapons","/assets/ship.weapons.png","/assets/ship.weapons.json"),this.game.load.atlasJSONHash("ship.weapons.explosions","/assets/ship.weapons.explosions.png","/assets/ship.weapons.explosions.json"),this.game.load.atlasJSONHash("greenExplosion","/assets/greenExplosion.png","/assets/greenExplosion.json"),this.game.load.atlasJSONHash("ship.blueExplosion","/assets/ship.blueExplosion.png","/assets/ship.blueExplosion.json"),this.game.load.atlasJSONHash("monsters.dayanguai","/assets/monster_dayanguai.png","/assets/monster_dayanguai.json"),this.game.load.atlasJSONHash("monsters.haimian","/assets/monster_haimian.png","/assets/monster_haimian.json"),this.game.load.atlasJSONHash("score_numbers","/assets/score_numbers.png","/assets/score_numbers.json"),this.game.load.atlasJSONHash("points_numbers","/assets/points_numbers.png","/assets/points_numbers.json"),this.game.load.atlasJSONHash("upgrades","/assets/upgrades.png","/assets/upgrades.json"),this.game.load.image("ship.trail","/assets/ship.trail.png"),this.game.load.image("playerPanel","/assets/player_panel.png"),this.game.load.image("playerIconBackground","/assets/player_icon_background.png"),this.game.load.image("player1_icon","/assets/player1_icon.png"),this.game.load.image("lives_icon","/assets/lives_icon.png"),this.game.load.image("lives_X","/assets/lives_X.png"),this.game.load.atlasJSONHash("upgradePresentor","/assets/upgrade_presentor.png","/assets/upgrade_presentor.json"),this.game.load.image("upgradeCounterLeft","/assets/upgrade_counter_left.png"),this.game.load.image("upgradeCounterRight","/assets/upgrade_counter_right.png"),this.game.load.audio("ship.blueExplosion","/assets/audio/ship.blueExplosion.mp3"),this.game.load.audio("ship.zidan","/assets/audio/ship_zidan_sound.mp3"),this.game.load.audio("ship.rocket","/assets/audio/ship_rocket_sound.mp3"),this.game.load.audio("ship.ripple","/assets/audio/ship_ripple_sound.mp3"),this.game.load.audio("ship.laser","/assets/audio/ship_laser_sound.mp3"),this.game.load.audio("mission_1_intro","/assets/audio/sound-mission-1-intro.mp3"),this.game.load.audio("mission_1_loop","/assets/audio/sound-mission-1-loop.mp3"),this.game.load.audio("ship.pickupUpgrade","/assets/audio/ship_pickup_upgrade.mp3"),this.game.load.audio("upgrade","/assets/audio/upgrades/upgrade.mp3"),this.game.load.audio("upgrade_missile","/assets/audio/upgrades/upgrade_missile.mp3"),this.game.load.audio("upgrade_ripple","/assets/audio/upgrades/upgrade_ripple.mp3"),this.game.load.audio("upgrade_laser","/assets/audio/upgrades/upgrade_laser.mp3"),this.game.load.audio("upgrade_option","/assets/audio/upgrades/upgrade_option.mp3"),this.game.load.audio("upgrade_force","/assets/audio/upgrades/upgrade_force.mp3"),this.game.load.tilemap("map1","/assets/stages/1/map.json",null,Phaser.Tilemap.TILED_JSON),this.game.load.atlasJSONHash("stage1Environment","/assets/stages/1/stage1_roubi.png","/assets/stages/1/stage1_roubi.json"),this.ready=!0},e.prototype.loadResources=function(){},e.prototype.create=function(){},e.prototype.update=function(){this.game.state.start("menu")},e.prototype.onLoadComplete=function(){},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}],24:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Sprite,n=function(t){function e(e,i){var s=this;t.call(this,e,0,0,"ship.weapons"),e.world.add(this),i.addChild(this),this.anchor.set(.5),this.x-=10,this.y+=7,this.visible=!1,this.ship=i,this.forceAnimation=this.animations.add("force",Phaser.Animation.generateFrameNames("force_",1,3),20,!0),i.onDamage.add(function(){return s.onShipDamage()})}return s(e,t),e.prototype.activate=function(){this.ship.heal(5),this.visible=!0,this.forceAnimation.play()},e.prototype.onShipDamage=function(){this.ship.health<=1&&(this.visible=!1,this.forceAnimation.stop(!0))},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],25:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Point,n=Phaser.Sprite,a=t("../systems/optionWeaponsSystem"),r=function(t){function e(e,i,s,o){var n=this;void 0===o&&(o={}),t.call(this,e,s.x+50,s.y+50,"ship.weapons","option"),this.path=[],e.world.add(this),this.anchor.set(.5),this.weaponSystem=new a["default"](e,this),this.weaponSystem.importData(o),this.ship=i,this.followTarget=s;var r=this.ship.onFire.add(function(){return n.weaponSystem.fireWeapon()}),p=this.weaponSystem.onEnemyKilled.add(function(t){return i.onEnemyKilled.dispatch(t)});this.events.onDestroy.addOnce(function(){r.detach(),p.detach()})}return s(e,t),e.prototype.update=function(){this.weaponSystem.updateFire();var t=Phaser.Math.distance(this.x,this.y,this.followTarget.x,this.followTarget.y);t<=e.distanceFromFollowTarget&&(this.path=[]),0===this.path.length&&t>e.distanceFromFollowTarget&&this.populatePath();var i=this.path.shift()||this.position;this.x=i.x,this.y=i.y},e.prototype.upgradeRockets=function(){this.weaponSystem.upgradeRockets()},e.prototype.upgradeRipple=function(){this.weaponSystem.upgradeRipple()},e.prototype.upgradeLaser=function(){this.weaponSystem.upgradeLaser()},e.prototype.getShip=function(){return this.ship},e.prototype.populatePath=function(){for(var t={x:[this.x,this.followTarget.x],y:[this.y,this.followTarget.y]},e=.05,i=0;1>=i;i+=e){var s=Phaser.Math.linearInterpolation(t.x,i),n=Phaser.Math.linearInterpolation(t.y,i);this.path.push(new o(s,n))}},e.distanceFromFollowTarget=50,e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{"../systems/optionWeaponsSystem":29}],26:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Signal,n=Phaser.Keyboard,a=t("../monsters/death/explostions"),r=t("./systems/movementSystems"),p=t("./systems/collisionDetectionSystem"),h=t("./systems/shipWeaponsSystem"),u=t("./option/option"),l=Phaser.Sprite,c=t("./force"),d=function(t){function e(e){var i=this;t.call(this,e,0,0,"ship","start.png"),this.isSpawning=!1,this.options=[],e.world.add(this),this.maxHealth=6,this.invisibilityTimer=e.time.create(!1),this.invisibilityTimer.loop(3500,function(){return i.invisibilityPeriodOver()}),this.spawnEndPoint={x:e.width/3,y:e.world.centerY},this.explosion=a.createBlue(e),this.initializeSprites(),this.weaponsSystem=new h["default"](e,this,this.sparkSprite,{fire:n.SPACEBAR}),this.collisionSystem=new p["default"](e,this),this.movementSystem=new r["default"](e,this,{up:n.W,down:n.S,right:n.D,left:n.A}),this.onDamage=new o,this.onUpgradePickup=this.collisionSystem.onUpgradePickup,this.onEnemyKilled=this.weaponsSystem.onEnemyKilled,this.onDeath=this.events.onKilled,this.onMove=this.movementSystem.onMove,this.onFire=this.weaponsSystem.onFire,this.force=new c["default"](e,this)}return s(e,t),e.prototype.spawn=function(){this.resetToMiddleLeft(),this.isSpawning=!0,this.invisibilityTimer.start(),this.invisibilityTween.start(),this.invisibilityTween.resume(),this.revive(1)},e.prototype.kill=function(){return this.options.forEach(function(t){return t.destroy(!0)}),this.options=[],t.prototype.kill.call(this)},e.prototype.damage=function(e){t.prototype.damage.call(this,e),this.onDamage.dispatch()},e.prototype.update=function(){this.isSpawning?this.yetToReachSpawnPoint()?this.movementSystem.moveWithSpin():this.isSpawning=!1:this.alive?(this.collisionSystem.checkCollisions(),this.weaponsSystem.updateFire(),this.movementSystem.updateMovement()):this.respawn()},e.prototype.addOption=function(){this.options.push(new u["default"](this.game,this,this.getNextFollowTarget(),this.weaponsSystem.exportData()))},e.prototype.getNextFollowTarget=function(){return 0==this.options.length?this:this.options[this.options.length-1]},e.prototype.upgradeRockets=function(){this.weaponsSystem.upgradeRockets(),this.options.forEach(function(t){return t.upgradeRockets()})},e.prototype.upgradeRipple=function(){this.weaponsSystem.upgradeRipple(),this.options.forEach(function(t){return t.upgradeRipple()})},e.prototype.upgradeLaser=function(){this.weaponsSystem.upgradeLaser(),this.options.forEach(function(t){return t.upgradeLaser()})},e.prototype.activateForce=function(){this.force.activate()},Object.defineProperty(e.prototype,"isInvincible",{get:function(){return!(this.invisibilityTween.isPaused||!this.invisibilityTween.isRunning)},enumerable:!0,configurable:!0}),e.prototype.resetToMiddleLeft=function(){this.position.set(0,this.game.world.centerY)},e.prototype.invisibilityPeriodOver=function(){this.invisibilityTween.pause(),this.alpha=1,this.invisibilityTimer.stop(!1)},e.prototype.respawn=function(){this.explosion.play(this.body),this.spawn()},e.prototype.yetToReachSpawnPoint=function(){return this.x<=this.spawnEndPoint.x&&this.y<=this.spawnEndPoint.y},e.prototype.initializeSprites=function(){this.initializeShipSprite(),this.initializeSparkSprite(),this.initializeTrail()},e.prototype.initializeShipSprite=function(){this.game.physics.arcade.enable(this),this.anchor.setTo(.5),this.body.collideWorldBounds=!0},e.prototype.initializeSparkSprite=function(){this.sparkSprite=this.game.add.sprite(60,6,"ship.weapons"),this.addChild(this.sparkSprite),this.sparkSprite.anchor.set(.5,.5),this.sparkSprite.scale.set(.95),this.sparkSprite.visible=!1,this.invisibilityTween=this.game.add.tween(this).to({alpha:.3},200,Phaser.Easing.Linear.None,!1,0,1/0,!0)},e.prototype.initializeTrail=function(){var t=this.game.add.sprite(-38,8,"ship.trail");t.scale.set(.7),t.anchor.set(1,.5),this.addChild(t),this.game.add.tween(t).to({"scale.x":.5,"scale.y":.2,alpha:.8},250,Phaser.Easing.Linear.None,!0,0,1/0,!0),
this.game.add.tween(t.scale).to({y:.2},250,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(t).to({alpha:.8},250,Phaser.Easing.Exponential.InOut,!0,0,1/0,!0)},e}(l);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=d},{"../monsters/death/explostions":19,"./force":24,"./option/option":25,"./systems/collisionDetectionSystem":27,"./systems/movementSystems":28,"./systems/shipWeaponsSystem":30}],27:[function(t,e,i){"use strict";var s=Phaser.Signal,o=function(){function t(t,e){this.game=t,this.ship=e,this.onUpgradePickup=new s}return t.prototype.checkCollisions=function(){this.game.world.getByName("monsters").forEachAlive(this.checkMonster.bind(this)),this.game.world.getByName("upgrades").forEachAlive(this.checkUpgrade.bind(this)),this.game.world.getByName("foreground").forEachAlive(this.checkObstacle.bind(this))},t.prototype.checkMonster=function(t){this.game.physics.arcade.collide(this.ship,t)&&(this.ship.isInvincible||(this.ship.damage(1),this.ship.alive&&t.kill()))},t.prototype.checkUpgrade=function(t){this.game.physics.arcade.collide(this.ship,t)&&(t.kill(),this.onUpgradePickup.dispatch(this.ship))},t.prototype.checkObstacle=function(t){this.game.physics.arcade.collide(this.ship,t)&&(this.ship.isInvincible||this.ship.kill())},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}],28:[function(t,e,i){"use strict";var s=Phaser.Signal,o=Phaser.Point,n=function(){function t(t,e,i){this.speed=4,this.frameRate=50,this.keyToMovement=[],this.keys=[],this.game=t,this.ship=e,this.keySchema=i,this.initializeKeyToMovement(i),this.initializeKeyEvents(i),this.initializeAnimations(),this.onMove=new s}return t.prototype.updateMovement=function(){for(var t=this.getCurrentPosition(),e=!1,i=0,s=this.keyToMovement;i<s.length;i++){var o=s[i];this.game.input.keyboard.isDown(o.key)&&(e=!0,o.func())}e&&this.onMove.dispatch({curPosition:this.getCurrentPosition(),pastPosition:t})},t.prototype.moveWithSpin=function(){var t=this.getCurrentPosition();this.getCurrentAnimation().isPlaying||this.spin(),this.ship.body.x+=3*this.speed,this.onMove.dispatch({curPosition:this.getCurrentPosition(),pastPosition:t})},t.prototype.spin=function(){var t=this;if(!this.ship.animations.currentAnim.isPlaying){var e=this.ship.animations.getAnimation("moveUpFull"),i=this.ship.animations.getAnimation("moveDownFull"),s=3*this.frameRate;e.play(s,!1).onComplete.addOnce(function(){t.ship.scale.setTo(1,-1),e.reverseOnce().play(s,!1).onComplete.addOnce(function(){i.play(s,!1).onComplete.addOnce(function(){t.ship.scale.setTo(1,1),i.reverseOnce().play(s,!1)})})})}},t.prototype.upPressed=function(){var t=this;this.animateMovement("moveUp",function(){return t.upPressed()})},t.prototype.downPressed=function(){var t=this;this.animateMovement("moveDown",function(){return t.downPressed()})},t.prototype.directionKeyReleased=function(t){var e=this,i=this.getCurrentAnimation();"moveUp"===i.name&&t.keyCode===this.keySchema.up||"moveDown"===i.name&&t.keyCode===this.keySchema.down?(i.reverseOnce(),i.isPlaying||i.play(this.frameRate,!1)):i.onComplete.addOnce(function(){e.getCurrentAnimation().stop()})},t.prototype.animateMovement=function(t,e){var i=this.getCurrentAnimation();i.isPlaying&&i.name===t?i.reverseOnce():i.isPlaying?i.onComplete.addOnce(function(){return e()}):this.ship.animations.play(t,this.frameRate,!1)},t.prototype.getCurrentAnimation=function(){return this.ship.animations.currentAnim},t.prototype.moveUp=function(){this.ship.body.y-=this.speed},t.prototype.moveDown=function(){this.ship.body.y+=this.speed},t.prototype.moveRight=function(){this.ship.body.x+=this.speed},t.prototype.moveLeft=function(){this.ship.body.x-=this.speed},t.prototype.initializeKeyToMovement=function(t){var e=this;this.keyToMovement.push({key:t.up,func:function(){return e.moveUp()}}),this.keyToMovement.push({key:t.down,func:function(){return e.moveDown()}}),this.keyToMovement.push({key:t.right,func:function(){return e.moveRight()}}),this.keyToMovement.push({key:t.left,func:function(){return e.moveLeft()}})},t.prototype.initializeAnimations=function(){var t=["start.png"].concat(Phaser.Animation.generateFrameNames("move-up-",1,7,".png",2)),e=["start.png"].concat(Phaser.Animation.generateFrameNames("move-down-",1,7,".png",2)),i=["start.png"].concat(Phaser.Animation.generateFrameNames("move-up-",1,14,".png",2)),s=["start.png"].concat(Phaser.Animation.generateFrameNames("move-down-",1,16,".png",2));this.ship.animations.add("moveUp",t,this.frameRate,!0),this.ship.animations.add("moveUpFull",i,this.frameRate,!0),this.ship.animations.add("moveDown",e,this.frameRate,!0),this.ship.animations.add("moveDownFull",s,this.frameRate,!0)},t.prototype.initializeKeyEvents=function(t){var e=this;this.keys[t.up]=this.game.input.keyboard.addKey(t.up),this.keys[t.down]=this.game.input.keyboard.addKey(t.down),this.keys[t.up].onDown.add(function(){return e.upPressed()}),this.keys[t.up].onUp.add(function(t){return e.directionKeyReleased(t)}),this.keys[t.down].onUp.add(function(t){return e.directionKeyReleased(t)}),this.keys[t.down].onDown.add(function(){return e.downPressed()})},t.prototype.getCurrentPosition=function(){return new o(this.ship.body.x,this.ship.body.y)},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],29:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./weaponsSystem"),n=function(t){function e(e,i){t.call(this,e),this.option=i,this.initializeOnEnemyKilledEvent()}return s(e,t),e.prototype.getSourceData=function(){return{x:this.option.x+this.option.width/2,y:this.option.y+this.option.height/2,width:this.option.width,height:this.option.height}},e.prototype.fireWeapon=function(){this.fire()},e.prototype.initializeOnEnemyKilledEvent=function(){var t=this;for(var e in this.weapons)if(this.weapons.hasOwnProperty(e)){var i=this.weapons[e];i.onEnemyKilled.add(function(e){e.ship=t.option.getShip(),t.onEnemyKilled.dispatch(e)})}},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./weaponsSystem":31}],30:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Signal,n=t("./weaponsSystem"),a=function(t){function e(e,i,s,n){t.call(this,e),this.onEnemyKilled=new o,this.ship=i,this.sparkSprite=s,this.keySchema=n,this.initializeAnimations(),this.initializeOnEnemyKilledEvent()}return s(e,t),e.prototype.updateFire=function(){this.game.input.keyboard.isDown(this.keySchema.fire)&&this.fire(),t.prototype.updateFire.call(this)},e.prototype.fire=function(){this.weapon.canFire()&&(this.animateSpark(),t.prototype.fire.call(this))},e.prototype.animateSpark=function(){var t=this;this.sparkSprite.animations.currentAnim.isPlaying||(this.sparkSprite.visible=!0,this.sparkSprite.animations.play("fire").onComplete.addOnce(function(){return t.sparkSprite.visible=!1}))},e.prototype.getSourceData=function(){var t=this.sparkSprite.parent;return{x:t.x+t.width/2,y:t.y+t.height/2,width:t.width,height:t.height}},e.prototype.initializeAnimations=function(){this.sparkSprite.animations.add("fire",Phaser.Animation.generateFrameNames("fire_spark_",1,4),20)},e.prototype.initializeOnEnemyKilledEvent=function(){var t=this;for(var e in this.weapons)if(this.weapons.hasOwnProperty(e)){var i=this.weapons[e];i.onEnemyKilled.add(function(e){e.ship=t.ship,t.onEnemyKilled.dispatch(e)})}},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./weaponsSystem":31}],31:[function(t,e,i){"use strict";var s=t("../../weapon/DoubleBullet"),o=Phaser.Signal,n=t("../../weapon/rocketsLauncher"),a=t("../../weapon/rippleGun"),r=t("../../weapon/laserGun"),p=function(){function t(t){this.onEnemyKilled=new o,this.onFire=new o,this.weapons={defaultWeapon:new s["default"](t),rippleGun:new a["default"](t),laserGun:new r["default"](t),rocketLauncher:new n["default"](t)},this.rocketsLauncher=this.weapons.rocketLauncher,this.weapon=this.weapons.defaultWeapon,this.game=t}return t.prototype.upgradeRockets=function(){this.rocketsLauncher.upgrade()},t.prototype.upgradeLaser=function(){this.upgradeAndSet(this.weapons.laserGun)},t.prototype.upgradeRipple=function(){this.upgradeAndSet(this.weapons.rippleGun)},t.prototype.updateFire=function(){this.rocketsLauncher.fire(this.getSourceData())},t.prototype.exportData=function(){var t=this.weapons.defaultWeapon===this.weapon?"defaultWeapon":this.weapon.name,e={currentWeapon:t,levels:{}};for(var i in this.weapons)if(this.weapons.hasOwnProperty(i)){var s=this.weapons[i];e.levels[i]=s.getLevel()}return e},t.prototype.importData=function(t){this.weapon=this.weapons[t.currentWeapon];for(var e in t.levels)t.levels.hasOwnProperty(e)&&this.weapons[e].setLevel(t.levels[e])},t.prototype.upgradeAndSet=function(t){t.upgrade(),this.weapon=t},t.prototype.fire=function(){this.weapon.canFire()&&(this.weapon.fire(this.getSourceData()),this.onFire.dispatch())},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=p},{"../../weapon/DoubleBullet":37,"../../weapon/laserGun":40,"../../weapon/rippleGun":43,"../../weapon/rocketsLauncher":45}],32:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Sprite,n=function(t){function e(e,i,s,o,n){t.call(this,e,i.x,i.y,s),this.game.physics.arcade.enable(this),this.animations.add("default",Phaser.Animation.generateFrameNames(o,1,n),10,!0).play()}return s(e,t),e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],33:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Group,n=Phaser.BitmapData,a=function(t){function e(e,i,s,o){var n=this;t.call(this,e,e.world,i),this.objectFactory={image:function(t){t.properties.repeat?n.createTileSprite(t):n.createImage(t)},imgGroup:function(t,e){e[t.properties.imgGroup]?e[t.properties.imgGroup].images.push(t):e[t.properties.imgGroup]={images:[t]}},imgGroupData:function(t,e){e[t.properties.imgGroup]?e[t.properties.imgGroup].data=t:e[t.properties.imgGroup]={images:[],data:t}},object:function(t){n.objects.push(t)}},this._xVelocity=0,this._yVelocity=0,this.images=[],this.tileSprites=[],this.objects=[],this.id=i,this.game=e,this.map=o,this.createObjects(s)}return s(e,t),e.prototype.createObjects=function(t){var e=this,i={};t.forEach(function(t){e.objectFactory[t.type||"object"](t,i)}),this.createImageGroups(i)},e.prototype.createTileSprite=function(t){var i=this.game.cache.getImage(t.properties.img,!0),s=this.game.add.tileSprite(t.x,t.y,this.game.width,t.height,this.createBitmapDataFrom(t,i),null,this);s.anchor.set(.5,.5),t.width=this.game.width,e.transformPositionFromTiledPosition(s,t),this.tileSprites.push(s)},e.prototype.createImage=function(t){var i=this.game.cache.getImage(t.properties.img,!0),s=this.game.add.image(0,0,this.createBitmapDataFrom(t,i),null,this);s.anchor.set(.5,.5),e.transformPositionFromTiledPosition(s,t),this.images.push(s)},e.drawImage=function(t,i,s,o){var n=new PIXI.Sprite(new PIXI.Texture(i.base));n.anchor.set(.5,.5),e.transformPositionFromTiledPosition(n,t),e.applyFlipData(t,n),s.draw(n,n.x-o.data.x+Math.abs(n.width),n.y-o.data.y,t.width,t.height)},e.prototype.update=function(){var t=this,e=!0;this.tileSprites.forEach(function(i){i.worldPosition.x<=t.game.world.centerX&&(e=!1,i.tilePosition.x+=t.xVelocity)}),e&&this.position.add(this.xVelocity,this.yVelocity)},e.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.map.widthInPixels*this.scale.x,this.map.heightInPixels*this.scale.y)},Object.defineProperty(e.prototype,"xVelocity",{get:function(){return this._xVelocity},set:function(t){this._xVelocity=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yVelocity",{get:function(){return this._yVelocity},set:function(t){this._yVelocity=t},enumerable:!0,configurable:!0}),e.prototype.getObjectsByName=function(t){return this.objects.filter(function(e){return e.name===t})},e.prototype.createFromObjects=function(t,i){var s=this;this.objects.forEach(function(o){if(o.name===t){var n=i(o);n.anchor.set(.5,.5),e.applyFlipData(o,n),e.transformPositionFromTiledPosition(n,o),s.add(n)}})},e.prototype.inBounds=function(t,e){var i=Math.abs(this.position.x),s=i+this.game.width,o=Math.abs(this.position.y),n=o+this.game.height;return t>=i&&s>=t&&e>=o&&n>=e},e.prototype.createImageGroups=function(t){var i=this,s=function(s){var a=t[s],r=new n(o.game,a.data.name,a.data.width,a.data.height);if(a.images.forEach(function(t){e.drawImage(t,i.game.cache.getImage(t.properties.img,!0),r,a)}),a.data.properties.repeat){var p=o.game.add.tileSprite(a.data.x+a.data.width/2,a.data.y+a.data.height/2,a.data.width,a.data.height,r,null,o);p.anchor.set(.5,.5),o.tileSprites.push(p)}else{var h=o.game.add.image(a.data.x+a.data.width/2,a.data.y+a.data.height/2,r,null,o);h.anchor.set(.5,.5),o.images.push(h)}},o=this;for(var a in t)s(a)},e.prototype.createBitmapDataFrom=function(t,i){var s=new PIXI.Sprite(new PIXI.Texture(i.base));return s.anchor.set(.5,.5),e.applyFlipData(t,s),new n(this.game,t.name,t.width,t.height).draw(s,t.width/2,t.height/2,t.width,t.height)},e.applyFlipData=function(t,i){t.gid&e.FLIPPED_HORIZONTALLY_FLAG&&(i.rotation*=-1,i.scale.x=-1),t.gid&e.FLIPPED_VERTICALLY_FLAG&&(i.scale.y=-1)},e.transformPositionFromTiledPosition=function(t,e){t.rotation=Phaser.Math.degToRad(e.rotation||0);var i=e.width/2,s=-e.height/2,o=Math.cos(t.rotation),n=Math.sin(t.rotation);t.x=i*o-s*n,t.y=i*n+s*o,t.x+=e.x,t.y+=e.y},e.FLIPPED_HORIZONTALLY_FLAG=2147483648,e.FLIPPED_VERTICALLY_FLAG=1073741824,e.FLIPPED_DIAGONALLY_FLAG=536870912,e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{}],34:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("../upgrades/upgrade"),n=t("./objectLayer"),a=t("../gui/PlayerGUI"),r=t("../ship/ship"),p=function(t){function e(e,i){t.call(this),this.onEvents=[],this.objectLayers={},this.mapId=e,this.assetsLocation=i}return s(e,t),e.prototype.preload=function(){this.mapData=this.game.cache.getJSON(this.mapId+"Data");for(var t in this.mapData.tilesets[0].tiles){var e=this.mapData.tilesets[0].tiles[t].image;this.game.load.image(e,this.assetsLocation+"/"+e)}},e.prototype.create=function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.monsters=this.game.add.group(this.game.world,"monsters"),this.upgrades=this.game.add.group(this.game.world,"upgrades"),this.map=this.game.add.tilemap(this.mapId),this.upgrades.classType=o["default"],this.upgrades.createMultiple(5,""),this.createObjectLayers(),this.createEnvironment(),this.createMonsters(),this.playStageMusic(),this.game.world.bringToTop(this.monsters),this.game.world.bringToTop(this.upgrades),this.ship=new r["default"](this.game),this.playerGUI=new a["default"](this.game,this.ship)},e.prototype.update=function(){this.activateEvents()},e.prototype.activateEvents=function(){for(var t=this.onEvents.length;t--;){var e=this.onEvents[t];e.predicate()&&(e.call(),e.once&&this.onEvents.splice(t,1))}},e.prototype.addEvent=function(t,e,i){void 0===i&&(i=!0),this.onEvents.push(new h(t,e,i))},e.prototype.createObjectLayers=function(){var t=this,e=5;this.mapData.layers.filter(function(t){return"objectgroup"===t.type}).forEach(function(i){t.objectLayers[i.name]=new n["default"](t.game,i.name,i.objects,t.map),t.objectLayers[i.name].xVelocity=-e})},e}(Phaser.State),h=function(){function t(t,e,i){this.predicate=t,this.call=e,this.once=i}return t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=p},{"../gui/PlayerGUI":3,"../ship/ship":26,"../upgrades/upgrade":35,"./objectLayer":33}],35:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Sprite,n=function(t){function e(e){t.call(this,e,700,700,"upgrades","upgrade_1_center"),e.world.add(this),e.world.getByName("upgrades").add(this),e.physics.arcade.enable(this),this.pickupSound=e.add.sound("ship.pickupUpgrade");var i=new o(e,-13,23.5,"upgrades","upgrade_1_left"),s=new o(e,73,23.5,"upgrades","upgrade_1_right"),n=new o(e,25,-3,"upgrades","upgrade_1_top"),a=new o(e,25,69,"upgrades","upgrade_1_bottom");this.createTweens(n,a,i,s),this.addChild(i),this.addChild(s),this.addChild(n),this.addChild(a)}return s(e,t),e.prototype.createTweens=function(e,i,s,o){this.game.add.tween(e).to({y:e.y-10},1e3,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(i).to({y:i.y+10},1e3,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(s).to({x:s.x-5},1e3,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(o).to({x:o.x+5},1e3,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.pickedTween=this.game.add.tween(this.scale).to({x:0,y:0},200,Phaser.Easing.Linear.None,!1,0),this.pickedTween.onComplete.add(t.prototype.kill,this)},e.prototype.kill=function(){return this.inWorld?(this.alive=!1,this.pickedTween.start(),this.pickupSound.play(),this):t.prototype.kill.call(this)},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],36:[function(t,e,i){"use strict";var s=function(){function t(){}return t.create=function(e,i,s,o,n,a,r,p,h,u){return void 0===a&&(a=0),void 0===r&&(r=0),void 0===p&&(p=0),void 0===h&&(h=0),void 0===u&&(u=!1),t._image=e.cache.getImage(o),t._frame="string"==typeof n?e.cache.getFrameByName(o,n):e.cache.getFrameByIndex(o,n),t.calculateNineImage(i,s,a,r,p,h,u),t._nineImage=new Phaser.BitmapData(e,"NineImage"+t._textureKey++,t._width,t._height),t.renderNineImage(),t._nineImage},t.calculateNineImage=function(e,i,s,o,n,a,r){var p=t._frame;if(t._centralWidth=p.width-o-a,t._centralHeight=p.height-s-n,r)t._horizontalRepeats=e,t._verticalRepeats=i,t._width=o+a+t._centralWidth*e,t._height=s+n+t._centralHeight*i,t._lastWidth=0,t._lastHeight=0;else{var h=e-o-a;t._horizontalRepeats=Math.floor(h/t._centralWidth),t._lastWidth=h%t._centralWidth;var u=i-s-n;t._verticalRepeats=Math.floor(u/t._centralHeight),t._lastHeight=u%t._centralHeight,t._width=e,t._height=i}t._leftWidth=o,t._rightWidth=a,t._topHeight=s,t._bottomHeight=n},t.renderNineImage=function(){var e=t._frame.y,i=0;t._topHeight>0&&(t.renderNineImageRow(t._image,e,i,t._topHeight),e+=t._topHeight,i+=t._topHeight);for(var s=0;s<t._verticalRepeats;s++)t.renderNineImageRow(t._image,e,i,t._centralHeight),i+=t._centralHeight;t._lastHeight>0&&(t.renderNineImageRow(t._image,e,i,t._lastHeight),i+=t._lastHeight),e+=t._centralHeight,t._bottomHeight>0&&t.renderNineImageRow(t._image,e,i,t._bottomHeight)},t.renderNineImageRow=function(e,i,s,o){var n=t._frame.x,a=0;t._leftWidth>0&&(t._nineImage.copy(e,n,i,t._leftWidth,o,a,s),a+=t._leftWidth,n+=t._leftWidth);for(var r=0;r<t._horizontalRepeats;r++)t._nineImage.copy(e,n,i,t._centralWidth,o,a,s),a+=t._centralWidth;t._lastWidth>0&&(t._nineImage.copy(e,n,i,t._lastWidth,o,a,s),a+=t._lastWidth),n+=t._centralWidth,t._rightWidth>0&&t._nineImage.copy(e,n,i,t._rightWidth,o,a,s)},t._textureKey=0,t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{}],37:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./Weapon"),n=function(t){function e(e){t.call(this,e,"doubleBullet","simpleBullet","ship.zidan")}return s(e,t),e.prototype.fire=function(t){if(!(this.game.time.time<this.nextFire)){var e=t.x,i=t.y;this.sound.play(),this.getFirstExists(!1).fire(e,i,0,this.projectileSpeed,0,0),this.getFirstExists(!1).fire(e,i-15,0,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./Weapon":38}],38:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Group,n=t("./projectile"),a=Phaser.Signal,r=function(t){function e(e,i,s,o,r){var p=this;void 0===r&&(r=30),t.call(this,e,e.world,i,!1,!0,Phaser.Physics.ARCADE),this.level=0,this.maxLevel=2,this.nextFire=0,this.projectileSpeed=1200,this.fireRate=300,this.projectileAngle=0,this.onEnemyKilled=new a,this.sound=e.add.sound(o);for(var h=0;r>h;h++){var u="string"==typeof s?new n["default"](e,s):s();u.onEnemyKilled.add(function(t){return p.onEnemyKilled.dispatch(t)}),this.add(u,!0)}}return s(e,t),e.prototype.upgrade=function(){var t=this;this.level!==this.maxLevel&&(this.level++,this.forEach(function(e){return e.setDamagePoints(t.level)},this))},e.prototype.fire=function(t){if(this.canFire()){this.sound.play();var e=t.x,i=t.y;this.getFirstExists(!1).fire(e,i,0,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e.prototype.canFire=function(){return!(this.game.time.time<this.nextFire)},e.prototype.getLevel=function(){return this.level},e.prototype.setLevel=function(t){this.level=t},e.prototype.isActive=function(){return this.level>0},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{"./projectile":41}],39:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./projectile"),n=function(t){function e(e,i){t.call(this,e,"laser_middle",i);var s=this.game.add.sprite(18,0,"ship.weapons","laser_ends"),o=this.game.add.sprite(-22,0,"ship.weapons","laser_ends"),n=4;this.scale.set(n,1),o.scale.set(-1/n,1),s.scale.set(1/n,1),o.anchor.set(.5),s.anchor.set(.5),this.addChild(s),this.addChild(o)}return s(e,t),e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"./projectile":41}],40:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./Weapon"),n=t("./laser"),a=function(t){function e(e){var i=this;t.call(this,e,"laserGun",function(){return new n["default"](e,i.level)},"ship.laser",10),this.projectileSpeed=2e3,this.fireRate=500,this.maxLevel=2}return s(e,t),e.prototype.fire=function(e){return e.x+=e.width/2,e.y-=e.height/2,t.prototype.fire.call(this,e)},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./Weapon":38,"./laser":39}],41:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=Phaser.Sprite,n=function(t){function e(e,i,s){void 0===s&&(s=1),t.call(this,e,0,0,"ship.weapons",i),this.texture.baseTexture.scaleMode=PIXI.scaleModes.NEAREST,this.onEnemyKilled=new Phaser.Signal,this.anchor.set(.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.exists=!1,this.damagePoints=s}return s(e,t),e.prototype.fire=function(t,e,i,s,o,n){var a=this.body;o=o||0,n=n||0,this.reset(t,e),this.game.physics.arcade.velocityFromAngle(i,s,a.velocity),this.angle=i,a.gravity.set(o,n)},e.prototype.update=function(){var t=this;this.game.world.getByName("monsters").forEachAlive(function(e){t.game.physics.arcade.collide(t,e)&&(e.damage(t.damagePoints),e.alive||t.onEnemyKilled.dispatch({monster:e}),t.kill())},this)},e.prototype.setDamagePoints=function(t){this.damagePoints=t},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],42:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./projectile"),n=t("../monsters/death/weaponExplostion"),a=function(t){function e(e,i){var s=this;t.call(this,e,"ripple",i),this.scale.set(.1),this.explosion=new n["default"](e,"ripple",4),this.events.onKilled.add(function(){return s.explosion.explode(s)})}return s(e,t),e.prototype.fire=function(e,i,s,o,n,a){t.prototype.fire.call(this,e,i,s,o,n,a),this.growTween=this.game.add.tween(this.scale).to({x:2,y:2},5e3,Phaser.Easing.Linear.None,!1,0,0,!1).start()},e.prototype.kill=function(){t.prototype.kill.call(this),this.growTween.stop(),this.scale.set(.1)},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"../monsters/death/weaponExplostion":20,"./projectile":41}],43:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./Weapon"),n=t("./ripple"),a=function(t){function e(e){var i=this;t.call(this,e,"rippleGun",function(){return new n["default"](e,i.level)},"ship.ripple",10),this.projectileSpeed=600,this.fireRate=1e3,this.maxLevel=2}return s(e,t),e.prototype.fire=function(t){if(this.isActive()){if(this.game.time.time<this.nextFire)return;this.sound.play();var e=t.x,i=t.y-t.height/2;this.getFirstExists(!1).fire(e,i,this.projectileAngle,this.projectileSpeed,0,0),this.getFirstExists(!1).fire(e,i,-this.projectileAngle,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./Weapon":38,"./ripple":42}],44:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./projectile"),n=t("../monsters/death/weaponExplostion"),a=function(t){function e(e,i){var s=this;t.call(this,e,"rocket",i),this.explosion=new n["default"](e,"rocket",5),this.scale.set(.8),this.events.onKilled.add(function(){return s.explosion.explode(s)})}return s(e,t),e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"../monsters/death/weaponExplostion":20,"./projectile":41}],45:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=t("./Weapon"),n=t("./rocket"),a=function(t){function e(e){var i=this;t.call(this,e,"rocketsLauncher",function(){return new n["default"](e,i.level)},"ship.rocket",10),this.projectileSpeed=600,this.fireRate=1500,this.projectileAngle=45,this.maxLevel=2}return s(e,t),e.prototype.fire=function(t){if(this.isActive()){if(this.game.time.time<this.nextFire)return;this.sound.play();var e=t.x-t.width/2,i=t.y;this.getFirstExists(!1).fire(e,i,this.projectileAngle,this.projectileSpeed,0,0),this.getFirstExists(!1).fire(e,i,-this.projectileAngle,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./Weapon":38,"./rocket":44}]},{},[14]);