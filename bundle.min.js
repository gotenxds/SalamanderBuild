!function t(e,i,s){function n(r,a){if(!i[r]){if(!e[r]){var p="function"==typeof require&&require;if(!a&&p)return p(r,!0);if(o)return o(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return n(i?i:t)},u,u.exports,t,e,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.preload=function(){this.game.load.image("preloader","assets/preloader.gif")},e.prototype.create=function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0),this.game.state.start("preloader")},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],2:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./ship/ship"),o=t("./monsters/dayanguai"),r=t("./gui/singlePLayerGUI"),a=t("./upgrades/upgrade"),p=Phaser.Key,h=t("./monsters/haimian"),u=t("./gui/upgradeCounter"),d=function(t){function e(){t.apply(this,arguments),this.keys={Key:p}}return s(e,t),e.prototype.create=function(){var t=this;this.game.add.group(this.game.world,"monsters");var e=this.game.add.group(this.game.world,"upgrades");e.classType=a["default"],e.createMultiple(5,""),this.game.physics.startSystem(Phaser.Physics.ARCADE);for(var i=this.game.world.getByName("monsters"),s=700,p=0;3>p;p++,s-=300){for(var d=o["default"].generatePathPoints(700,s),l=1;5>l;l++){var c=100*l+700;d.x.unshift(c),d.y.unshift(s),i.add(new o["default"](this.game,c,s,d),!1)}i.add(new h["default"](this.game,s),!1)}var f=this.game.add.sound("mission_1_loop",.5);this.game.add.sound("mission_1_intro",.5).play().onStop.addOnce(function(){f.loopFull()}),this.ship=new n["default"](this.game),this.ship.onEnemyKilled.add(function(e){return t.gui.addToScore(e.monster.getPoints())}),this.ship.onDeath.add(function(){return t.gui.addToLives(-1)}),this.ship.onUpgradePickup.add(function(){return t.upgradeCounter.selectNext()}),this.ship.spawn(),this.gui=new r["default"](this.game),this.upgradeCounter=new u["default"](this.game,this.ship)},e.prototype.update=function(){},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=d},{"./gui/singlePLayerGUI":4,"./gui/upgradeCounter":6,"./monsters/dayanguai":15,"./monsters/haimian":19,"./ship/ship":22,"./upgrades/upgrade":26}],3:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Group,o=function(t){function e(e,i,s,n,o,r,a){void 0===s&&(s=0),void 0===n&&(n=0),void 0===o&&(o=""),void 0===r&&(r=1/0),void 0===a&&(a=-1),t.call(this,e),this.dirty=!0,this.tag=i,this.maxChars=r,this.text=o,this.x=s,this.y=n,-1===a&&(this.height=this.game.cache.getImage(i).height)}return s(e,t),e.prototype.setText=function(t){this.dirty=this.text!==t,this.text=t,this.update()},e.prototype.update=function(){if(this.dirty){this.dirty=!1,this.forEachAlive(function(t){return t.kill()},this);for(var t=0,e=0,i=void 0,s=0,n=this.text;s<n.length;s++){var o=n[s];i=this.getFirstDead(!0,t,e,this.tag,o),i.revive(),t+=i.width}}},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}],4:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("../utils/NineImage"),o=Phaser.Sprite,r=t("./textAsImage"),a=function(t){function e(i){t.call(this,i,0,0,n["default"].create(i,295,77,"playerPanel",0,0,0,80,60)),this.score=0,this.lives=2,i.world.add(this);var s=this.createPlayerIcon(i,"player1_icon"),o=e.createPlayerIconBackground(i,"playerIconBackground"),r=e.createLivesIconBackground(i,s,"lives_icon"),a=e.createXIconBackground(i,r,s,"lives_X");this.createTextAsImages(i,s,a),this.addChild(o),this.addChild(s),this.addChild(r),this.addChild(a),this.addChild(this.scoreText),this.addChild(this.livesText),this.scoreText.update(),this.livesText.update()}return s(e,t),e.prototype.createTextAsImages=function(t,e,i){this.scoreText=new r["default"](t,"score_numbers",e.width+5,5,this.buildFormattedScore()),this.livesText=new r["default"](t,"score_numbers",i.x+i.width,e.height/2+10,this.lives.toString()),this.livesText.scale.set(.9,.9)},e.createPlayerIconBackground=function(t,e){var i=t.add.sprite(-7,-1.5,e);return i.width=83,i.height=83,i},e.prototype.createPlayerIcon=function(t,e){var i=t.add.sprite(2,5,e);return i.width=63,i.height=63,i},e.createLivesIconBackground=function(t,e,i){var s=t.add.sprite(e.width+15,e.height/2+5,i);return s.scale.set(.65,.65),s},e.createXIconBackground=function(t,e,i){var s=t.add.sprite(e.x+e.width+8,i.height/2+13,"lives_X");return s.scale.set(1.1,1.1),s},e.prototype.addToScore=function(t){this.score+=t,this.scoreText.setText(this.buildFormattedScore())},e.prototype.addToLives=function(t){this.lives+=t,this.livesText.setText(this.lives.toString()),this.lives<0&&alert("Dead bitch !")},e.prototype.buildFormattedScore=function(){for(var t=this.score.toString(),i="",s=t.length-1;s>=0;s--)i=e.thereShouldBeACommaHere(s,t)?","+(t[s]+i):t[s]+i;return i},e.thereShouldBeACommaHere=function(t,e){return t>0&&(e.length-t)%3===0},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"../utils/NineImage":27,"./textAsImage":5}],5:[function(t,e,i){arguments[4][3][0].apply(i,arguments)},{dup:3}],6:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Sprite,o=Phaser.Image,r=Phaser.Keyboard,a=t("./upgradePresentor/missilePresentor"),p=t("./upgradePresentor/rippliePresentor"),h=t("./upgradePresentor/laserPresentor"),u=t("./upgradePresentor/optionPresentor"),d=t("./upgradePresentor/forcePresentor"),l=t("./upgradePresentor/upgradePresentor"),c=function(t){function e(e,i){var s=this;t.call(this,e,e.world.centerX,e.height-40),this.selectedIndex=-1,this.upgradeKey=r.SHIFT,e.world.add(this),this.ship=i,this.upgradeSound=e.add.sound("upgrade"),this.addChild(new o(e,-340,0,"upgradeCounterLeft")),this.addChild(new o(e,47,0,"upgradeCounterRight")),this.presentors=[a["default"],p["default"],h["default"],u["default"],d["default"]].map(function(t,i){return s.addChild(new t(e,-315+i*l["default"].WIDTH,-5))})}return s(e,t),e.prototype.selectNext=function(){-1!=this.selectedIndex&&this.presentors[this.selectedIndex].deSelect(),this.selectedIndex=++this.selectedIndex%this.presentors.length,this.presentors[this.selectedIndex].select()},e.prototype.update=function(){if(this.viableForUpgrade()){var t=this.getSelected();t.upgrade(this.ship),t.deSelect(),this.upgradeSound.play(),this.reset()}},e.prototype.viableForUpgrade=function(){return this.game.input.keyboard.isDown(this.upgradeKey)&&-1!==this.selectedIndex&&!this.getSelected().maxedOut()},e.prototype.getSelected=function(){return this.presentors[this.selectedIndex]},e.prototype.reset=function(){this.selectedIndex=-1},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=c},{"./upgradePresentor/forcePresentor":7,"./upgradePresentor/laserPresentor":8,"./upgradePresentor/missilePresentor":9,"./upgradePresentor/optionPresentor":10,"./upgradePresentor/rippliePresentor":11,"./upgradePresentor/upgradePresentor":12}],7:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./upgradePresentor"),o=function(t){function e(e,i,s){t.call(this,e,i,s,"FORCE",2,"force")}return s(e,t),e.prototype.upgrade=function(){},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./upgradePresentor":12}],8:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./upgradePresentor"),o=function(t){function e(e,i,s){t.call(this,e,i,s,"LASER",2,"laser")}return s(e,t),e.prototype.upgrade=function(){},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./upgradePresentor":12}],9:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./upgradePresentor"),o=function(t){function e(e,i,s){t.call(this,e,i,s,"MISSILE",2,"missile")}return s(e,t),e.prototype.upgrade=function(e){this.maxedOut()||e.upgradeRockets(),t.prototype.upgrade.call(this,e)},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./upgradePresentor":12}],10:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./upgradePresentor"),o=function(t){function e(e,i,s){t.call(this,e,i,s,"OPTION",2,"option")}return s(e,t),e.prototype.upgrade=function(){},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./upgradePresentor":12}],11:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./upgradePresentor"),o=function(t){function e(e,i,s){t.call(this,e,i,s,"RIPPLE",2,"ripple")}return s(e,t),e.prototype.upgrade=function(){},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./upgradePresentor":12}],12:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Sprite,o=function(t){function e(e,i,s,n,o,r){t.call(this,e,i,s,"upgradePresentor","unselected"),this.level=0,e.world.add(this),this.sound=e.add.sound("upgrade_"+r),this.maxLevel=o,this.text=this.game.add.text(this.width/2,this.height/2+3,n,{font:"good_timesregular",fontSize:15,fill:"#FFFFFF",stroke:"#1391eb",strokeThickness:2}),this.text.anchor.set(.5,.5),this.addChild(this.text)}return s(e,t),e.prototype.select=function(){this.frameName="selected"},e.prototype.deSelect=function(){this.frameName="unselected"},e.prototype.upgrade=function(){this.sound.play(),this.level++,this.disableIfMaxedOut()},e.prototype.maxedOut=function(){return this.level===this.maxLevel},e.prototype.disableIfMaxedOut=function(){this.maxedOut()&&(this.text.visible=!1)},e.WIDTH=131,e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}],13:[function(t){"use strict";var e=t("./boot"),i=t("./preloader"),s=t("./menu"),n=t("./game"),o=new Phaser.Game("100%","100%",Phaser.AUTO,"salamander-game");o.state.add("boot",new e["default"]),o.state.add("preloader",new i["default"]),o.state.add("menu",new s["default"]),o.state.add("game",new n["default"]),o.state.start("boot")},{"./boot":1,"./game":2,"./menu":14,"./preloader":21}],14:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.create=function(){var t=this.game.add.text(.5*this.game.width,.5*this.game.height,"MENU",{font:"42px Arial",fill:"#ffffff",align:"center"});t.anchor.set(.5),this.game.input.onDown.add(this.onInputDown,this)},e.prototype.update=function(){},e.prototype.onInputDown=function(){this.game.state.start("game")},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],15:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Math,o=t("./monster"),r=function(t){function e(e,i,s,n,o){void 0===o&&(o="red"),t.call(this,e,i,s,"monsters.dayanguai",90,o+"Eye.png"),this.initializeSprites(e,o),this.initializePath(e,n)}return s(e,t),e.generatePathPoints=function(t,e){for(var i={x:[],y:[]},s=0;15>s;s++)i.x.push(t),i.y.push(e),t+=this.movementStatesX[s%this.movementStatesX.length],e+=this.movementStatesY[s%this.movementStatesY.length];return i},e.prototype.initializeSprites=function(t,e){t.world.addChild(this),this.scale.set(.9,.9),this.topShell=t.add.sprite(27,0,"monsters.dayanguai",e+"Shell.png"),this.bottomShell=t.add.sprite(27,59,"monsters.dayanguai",e+"Shell.png"),this.addChild(this.topShell),this.addChild(this.bottomShell),this.topShell.anchor.set(.5,.5),this.bottomShell.anchor.set(.5,.5),this.bottomShell.angle=180,t.add.tween(this.topShell).to({y:5},500,Phaser.Easing.Bounce.InOut,!0,0,1/0,!0),t.add.tween(this.bottomShell).to({y:64},500,Phaser.Easing.Bounce.InOut,!0,0,1/0,!0)},e.prototype.initializePath=function(t,e){for(var i=1/t.width,s=0;1>=s;s+=i){var o=n.linearInterpolation(e.x,s),r=n.linearInterpolation(e.y,s);this.path.push({x:o,y:r})}},e.movementStatesX=[-230,150],e.movementStatesY=[0,-150],e}(o["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{"./monster":20}],16:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./explostion"),o=function(t){function e(e){t.call(this,e,"ship.blue","explosion_blue",6,35)}return s(e,t),e.prototype.destroy=function(){this.reset()},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./explostion":17}],17:[function(t,e,i){"use strict";var s=function(){function t(t,e,i,s,n){var o=e+"Explosion";this.aperture=t.add.sprite(-999,-999,o),this.smoke=t.add.sprite(-999,-999,o),this.aperture.anchor.set(.5,.5),this.smoke.anchor.set(.5,.5),this.aperture.animations.add("boom",Phaser.Animation.generateFrameNames(i+"_aperture_",1,s,".png"),20),this.smoke.animations.add("boom",Phaser.Animation.generateFrameNames(i+"_smoke_",1,n,".png"),15),this.sound=t.add.sound(o)}return t.prototype.play=function(t,e){var i=this;void 0===e&&(e=function(){}),this.smoke.animations.currentAnim.isPlaying||(this.sound&&!this.sound.isPlaying&&this.sound.play(),this.aperture.x=t.x,this.aperture.y=t.y,this.smoke.x=t.x,this.smoke.y=t.y,this.aperture.animations.play("boom").onComplete.addOnce(function(){return i.aperture.visible=!1}),this.smoke.animations.play("boom").onComplete.addOnce(function(){e(),i.kill()}))},t.prototype.reset=function(){this.aperture.position.set(-999,-999),this.smoke.position.set(-999,-999)},t.prototype.destroy=function(){this.aperture.destroy(),this.smoke.destroy()},t.prototype.kill=function(){this.aperture.kill(),this.smoke.kill()},t.prototype.revive=function(){this.aperture.revive(),this.smoke.revive()},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{}],18:[function(t,e,i){"use strict";function s(t){return new o["default"](t,"green","green",6,33)}function n(t){return new r["default"](t)}var o=t("./explostion"),r=t("./blueExplosion");i.createGreen=s,i.createBlue=n},{"./blueExplosion":16,"./explostion":17}],19:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./monster"),o=function(t){function e(e,i){t.call(this,e,9999,i,"monsters.haimian",120),this.health=2,this.maxHealth=1;for(var s=this.game.width+100,n=Phaser.Math.sinCosGenerator(s,30,1,15).cos,o=0;s>o;o++)this.path.push({x:o,y:i+n[o]});this.initializeSprites(e),this.animations.add("move",Phaser.Animation.generateFrameNames("haimian_",1,5,".png"),7,!1)}return s(e,t),e.prototype.update=function(){var e=this;t.prototype.update.call(this),this.animations.currentAnim.isPlaying||this.animations.play("move").onComplete.addOnce(function(){e.animations.currentAnim.reverseOnce().play()})},e.prototype.initializeSprites=function(t){t.world.addChild(this),this.scale.set(.9,.9)},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./monster":20}],20:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Sprite,o=t("./death/explostions"),r=t("../gui/TextAsImage"),a=function(t){function e(e,i,s,n,a,p){var h=this;void 0===a&&(a=90),void 0===p&&(p=void 0),t.call(this,e,i,s,n,p),this.path=[],this.pathIndex=0,e.physics.arcade.enable(this),this.health=1,this.maxHealth=1,this.death=o.createGreen(e),this.pointsDisplay=new r["default"](e,"points_numbers",0,0,a.toString()),this.pointsDisplay.alpha=0,this.pointsTween=this.game.add.tween(this.pointsDisplay).to({},1e3,Phaser.Easing.Linear.None,!1,0,0),this.points=a,this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.events.onKilled.add(function(){return h.killed()})}return s(e,t),e.prototype.update=function(){this.alive&&(this.x=this.path[this.pathIndex].x,this.y=this.path[this.pathIndex].y,this.pathIndex++)},e.prototype.getPoints=function(){return this.points},e.prototype.playPoints=function(){this.pointsDisplay.alpha=1,this.pointsDisplay.position.set(this.x,this.y),this.pointsTween.updateTweenData("vEnd",{alpha:0,y:this.y-20}),this.pointsTween.start()},e.prototype.killed=function(){if(this.inWorld&&(this.death.play(this),this.playPoints(),Math.random()>=.75)){var t=this.game.world.getByName("upgrades").getFirstDead(!0,this.x,this.y);t.revive()}},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"../gui/TextAsImage":3,"./death/explostions":18}],21:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments),this.ready=!1}return s(e,t),e.prototype.preload=function(){this.asset=this.game.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.game.load.setPreloadSprite(this.asset),this.game.load.atlasJSONHash("ship","/assets/ship.png","/assets/ship.json"),this.game.load.atlasJSONHash("ship.weapons","/assets/ship.weapons.png","/assets/ship.weapons.json"),this.game.load.atlasJSONHash("greenExplosion","/assets/greenExplosion.png","/assets/greenExplosion.json"),this.game.load.atlasJSONHash("ship.blueExplosion","/assets/ship.blueExplosion.png","/assets/ship.blueExplosion.json"),this.game.load.atlasJSONHash("monsters.dayanguai","/assets/monster_dayanguai.png","/assets/monster_dayanguai.json"),this.game.load.atlasJSONHash("monsters.haimian","/assets/monster_haimian.png","/assets/monster_haimian.json"),this.game.load.atlasJSONHash("score_numbers","/assets/score_numbers.png","/assets/score_numbers.json"),this.game.load.atlasJSONHash("points_numbers","/assets/points_numbers.png","/assets/points_numbers.json"),this.game.load.atlasJSONHash("upgrades","/assets/upgrades.png","/assets/upgrades.json"),this.game.load.image("ship.trail","/assets/ship.trail.png"),this.game.load.image("playerPanel","/assets/player_panel.png"),this.game.load.image("playerIconBackground","/assets/player_icon_background.png"),this.game.load.image("player1_icon","/assets/player1_icon.png"),this.game.load.image("lives_icon","/assets/lives_icon.png"),this.game.load.image("lives_X","/assets/lives_X.png"),this.game.load.atlasJSONHash("upgradePresentor","/assets/upgrade_presentor.png","/assets/upgrade_presentor.json"),this.game.load.image("upgradeCounterLeft","/assets/upgrade_counter_left.png"),this.game.load.image("upgradeCounterRight","/assets/upgrade_counter_right.png"),this.game.load.audio("ship.blueExplosion","/assets/audio/ship.blueExplosion.mp3"),this.game.load.audio("ship.zidan","/assets/audio/ship_zidan_sound.mp3"),this.game.load.audio("mission_1_intro","/assets/audio/sound-mission-1-intro.mp3"),this.game.load.audio("mission_1_loop","/assets/audio/sound-mission-1-loop.mp3"),this.game.load.audio("ship.pickupUpgrade","/assets/audio/ship_pickup_upgrade.mp3"),this.game.load.audio("upgrade","/assets/audio/upgrades/upgrade.mp3"),this.game.load.audio("upgrade_missile","/assets/audio/upgrades/upgrade_missile.mp3"),this.game.load.audio("upgrade_ripple","/assets/audio/upgrades/upgrade_ripple.mp3"),this.game.load.audio("upgrade_laser","/assets/audio/upgrades/upgrade_laser.mp3"),this.game.load.audio("upgrade_option","/assets/audio/upgrades/upgrade_option.mp3"),this.game.load.audio("upgrade_force","/assets/audio/upgrades/upgrade_force.mp3"),this.ready=!0},e.prototype.loadResources=function(){},e.prototype.create=function(){},e.prototype.update=function(){this.game.state.start("menu")},e.prototype.onLoadComplete=function(){},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],22:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Keyboard,o=Phaser.Group,r=t("../monsters/death/explostions"),a=t("./systems/movementSystems"),p=t("./systems/weaponsSystem"),h=t("./systems/collisionDetectionSystem"),u=function(t){function e(e){var i=this;t.call(this,e),this.isSpawning=!1,this.invisibilityTimer=e.time.create(!1),this.invisibilityTimer.loop(3500,function(){return i.invisibilityPeriodOver()}),this.spawnEndPoint={x:e.width/3,y:e.world.centerY},this.explosion=r.createBlue(e),this.initializeSprites(),this.weaponsSystem=new p["default"](e,this,this.sparkSprite,{fire:n.SPACEBAR}),this.collisionSystem=new h["default"](e,this),this.movementSystem=new a["default"](e,this,this.sprite,{up:n.W,down:n.S,right:n.D,left:n.A}),this.onUpgradePickup=this.collisionSystem.onUpgradePickup,this.onEnemyKilled=this.weaponsSystem.onEnemyKilled,this.onDeath=this.sprite.events.onKilled}return s(e,t),e.prototype.spawn=function(){this.resetToMiddleLeft(),this.isSpawning=!0,this.invisibilityTimer.start(),this.invisibilityTween.start(),this.invisibilityTween.resume(),this.sprite.revive(1)},e.prototype.kill=function(){this.sprite.kill()},e.prototype.update=function(){this.isSpawning?this.yetToReachSpawnPoint()?this.movementSystem.moveWithSpin():this.isSpawning=!1:this.sprite.alive?(this.collisionSystem.checkCollisions(),this.weaponsSystem.updateFire(),this.movementSystem.updateMovement()):this.respawn()},e.prototype.upgradeRockets=function(){this.weaponsSystem.upgradeRockets()},Object.defineProperty(e.prototype,"isInvincible",{get:function(){return!(this.invisibilityTween.isPaused||!this.invisibilityTween.isRunning)},enumerable:!0,configurable:!0}),e.prototype.resetToMiddleLeft=function(){this.position.set(0,this.game.world.centerY)},e.prototype.invisibilityPeriodOver=function(){this.invisibilityTween.pause(),this.alpha=1,this.invisibilityTimer.stop(!1)},e.prototype.respawn=function(){this.explosion.play(this.sprite.body),this.spawn()},e.prototype.yetToReachSpawnPoint=function(){return this.x<=this.spawnEndPoint.x&&this.y<=this.spawnEndPoint.y},e.prototype.initializeSprites=function(){this.initializeShipSprite(),this.initializeSparkSprite(),this.initializeTrail()},e.prototype.initializeShipSprite=function(){this.sprite=this.game.add.sprite(0,0,"ship","start.png",this),this.game.physics.arcade.enable(this.sprite),this.sprite.anchor.setTo(.5),this.sprite.body.collideWorldBounds=!0},e.prototype.initializeSparkSprite=function(){this.sparkSprite=this.game.add.sprite(60,6,"ship.weapons"),this.sprite.addChild(this.sparkSprite),this.sparkSprite.anchor.set(.5,.5),this.sparkSprite.scale.set(.95),this.sparkSprite.visible=!1,this.invisibilityTween=this.game.add.tween(this).to({alpha:.3},200,Phaser.Easing.Linear.None,!1,0,1/0,!0)},e.prototype.initializeTrail=function(){var t=this.game.add.sprite(-38,8,"ship.trail");t.scale.set(.7),t.anchor.set(1,.5),this.sprite.addChild(t),this.game.add.tween(t.scale).to({x:.5,y:.2},250,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(t).to({alpha:.8},250,Phaser.Easing.Exponential.InOut,!0,0,1/0,!0)},e}(o);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=u},{"../monsters/death/explostions":18,"./systems/collisionDetectionSystem":23,"./systems/movementSystems":24,"./systems/weaponsSystem":25}],23:[function(t,e,i){"use strict";var s=Phaser.Signal,n=function(){function t(t,e){this.game=t,this.ship=e,this.onUpgradePickup=new s}return t.prototype.checkCollisions=function(){this.game.world.getByName("monsters").forEachAlive(this.checkMonster.bind(this)),this.game.world.getByName("upgrades").forEachAlive(this.checkUpgrade.bind(this))},t.prototype.checkMonster=function(t){this.game.physics.arcade.collide(this.ship,t)&&(this.ship.isInvincible||this.ship.kill())},t.prototype.checkUpgrade=function(t){this.game.physics.arcade.collide(this.ship,t)&&(t.kill(),this.onUpgradePickup.dispatch(this.ship))},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],24:[function(t,e,i){"use strict";var s=function(){function t(t,e,i,s){this.speed=4,this.frameRate=50,this.keyToMovement=[],this.keys=[],this.game=t,this.ship=e,this.shipSprite=i,this.keySchema=s,this.initializeKeyToMovement(s),this.initializeKeyEvents(s),this.initializeAnimations()}return t.prototype.updateMovement=function(){for(var t=0,e=this.keyToMovement;t<e.length;t++){var i=e[t];this.game.input.keyboard.isDown(i.key)&&i.func()}},t.prototype.moveWithSpin=function(){this.getCurrentAnimation().isPlaying||this.spin(),this.ship.x+=3*this.speed},t.prototype.spin=function(){var t=this;if(!this.shipSprite.animations.currentAnim.isPlaying){var e=this.shipSprite.animations.getAnimation("moveUpFull"),i=this.shipSprite.animations.getAnimation("moveDownFull"),s=3*this.frameRate;e.play(s,!1).onComplete.addOnce(function(){t.shipSprite.scale.setTo(1,-1),e.reverseOnce().play(s,!1).onComplete.addOnce(function(){i.play(s,!1).onComplete.addOnce(function(){t.shipSprite.scale.setTo(1,1),i.reverseOnce().play(s,!1)})})})}},t.prototype.upPressed=function(){var t=this;this.animateMovement("moveUp",function(){return t.upPressed()})},t.prototype.downPressed=function(){var t=this;this.animateMovement("moveDown",function(){return t.downPressed()})},t.prototype.directionKeyReleased=function(t){var e=this,i=this.getCurrentAnimation();"moveUp"===i.name&&t.keyCode===this.keySchema.up||"moveDown"===i.name&&t.keyCode===this.keySchema.down?(i.reverseOnce(),i.isPlaying||i.play(this.frameRate,!1)):i.onComplete.addOnce(function(){e.getCurrentAnimation().stop()})},t.prototype.animateMovement=function(t,e){var i=this.getCurrentAnimation();i.isPlaying&&i.name===t?i.reverseOnce():i.isPlaying?i.onComplete.addOnce(function(){return e()}):this.shipSprite.animations.play(t,this.frameRate,!1)},t.prototype.getCurrentAnimation=function(){return this.shipSprite.animations.currentAnim},t.prototype.moveUp=function(){this.shipSprite.y-=this.speed},t.prototype.moveDown=function(){this.ship.y+=this.speed},t.prototype.moveRight=function(){this.ship.x+=this.speed},t.prototype.moveLeft=function(){this.ship.x-=this.speed},t.prototype.initializeKeyToMovement=function(t){var e=this;this.keyToMovement.push({key:t.up,func:function(){return e.moveUp()}}),this.keyToMovement.push({key:t.down,func:function(){return e.moveDown()}}),this.keyToMovement.push({key:t.right,func:function(){return e.moveRight()}}),this.keyToMovement.push({key:t.left,func:function(){return e.moveLeft()}})},t.prototype.initializeAnimations=function(){var t=["start.png"].concat(Phaser.Animation.generateFrameNames("move-up-",1,7,".png",2)),e=["start.png"].concat(Phaser.Animation.generateFrameNames("move-down-",1,7,".png",2)),i=["start.png"].concat(Phaser.Animation.generateFrameNames("move-up-",1,14,".png",2)),s=["start.png"].concat(Phaser.Animation.generateFrameNames("move-down-",1,16,".png",2));this.shipSprite.animations.add("moveUp",t,this.frameRate,!0),this.shipSprite.animations.add("moveUpFull",i,this.frameRate,!0),this.shipSprite.animations.add("moveDown",e,this.frameRate,!0),this.shipSprite.animations.add("moveDownFull",s,this.frameRate,!0)},t.prototype.initializeKeyEvents=function(t){var e=this;this.keys[t.up]=this.game.input.keyboard.addKey(t.up),this.keys[t.down]=this.game.input.keyboard.addKey(t.down),this.keys[t.up].onDown.add(function(){return e.upPressed()}),this.keys[t.up].onUp.add(function(t){return e.directionKeyReleased(t)}),this.keys[t.down].onUp.add(function(t){return e.directionKeyReleased(t)}),this.keys[t.down].onDown.add(function(){return e.downPressed()})},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{}],25:[function(t,e,i){"use strict";var s=t("../../weapon/DoubleBullet"),n=Phaser.Signal,o=t("../../weapon/rocketsLauncher"),r=function(){function t(t,e,i,r){var a=this;this.onEnemyKilled=new n,this.weapons=[new s["default"](t)],this.rocketsLauncher=new o["default"](t),this.weapon=this.weapons[0],this.game=t,this.ship=e,this.sparkSprite=i,this.keySchema=r,this.initializeAnimations(),this.weapons.forEach(function(t){return t.onEnemyKilled.add(function(t){t.ship=a.ship,a.onEnemyKilled.dispatch(t)})})}return t.prototype.updateFire=function(){this.game.input.keyboard.isDown(this.keySchema.fire)&&this.fire(),this.rocketsLauncher.fire(this.getPosition())},t.prototype.upgradeRockets=function(){this.rocketsLauncher.upgrade()},t.prototype.fire=function(){this.animateSpark(),this.weapon.fire(this.getPosition())},t.prototype.animateSpark=function(){var t=this;this.sparkSprite.animations.currentAnim.isPlaying||(this.sparkSprite.visible=!0,this.sparkSprite.animations.play("fire").onComplete.addOnce(function(){return t.sparkSprite.visible=!1}))},t.prototype.getPosition=function(){var t=this.sparkSprite.parent;return{x:t.body.x,y:t.body.y}},t.prototype.initializeAnimations=function(){this.sparkSprite.animations.add("fire",Phaser.Animation.generateFrameNames("fire_spark_",1,4),20)},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{"../../weapon/DoubleBullet":28,"../../weapon/rocketsLauncher":32}],26:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Sprite,o=function(t){function e(e){t.call(this,e,700,700,"upgrades","upgrade_1_center"),e.world.add(this),e.world.getByName("upgrades").add(this),e.physics.arcade.enable(this),this.pickupSound=e.add.sound("ship.pickupUpgrade");var i=new n(e,-13,23.5,"upgrades","upgrade_1_left"),s=new n(e,73,23.5,"upgrades","upgrade_1_right"),o=new n(e,25,-3,"upgrades","upgrade_1_top"),r=new n(e,25,69,"upgrades","upgrade_1_bottom");

this.createTweens(o,r,i,s),this.addChild(i),this.addChild(s),this.addChild(o),this.addChild(r)}return s(e,t),e.prototype.createTweens=function(e,i,s,n){this.game.add.tween(e).to({y:e.y-10},1e3,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(i).to({y:i.y+10},1e3,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(s).to({x:s.x-5},1e3,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.game.add.tween(n).to({x:n.x+5},1e3,Phaser.Easing.Linear.None,!0,0,1/0,!0),this.pickedTween=this.game.add.tween(this.scale).to({x:0,y:0},200,Phaser.Easing.Linear.None,!1,0),this.pickedTween.onComplete.add(t.prototype.kill,this)},e.prototype.kill=function(){this.inWorld?(this.alive=!1,this.pickedTween.start(),this.pickupSound.play()):t.prototype.kill.call(this)},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}],27:[function(t,e,i){"use strict";var s=function(){function t(){}return t.create=function(e,i,s,n,o,r,a,p,h,u){return void 0===r&&(r=0),void 0===a&&(a=0),void 0===p&&(p=0),void 0===h&&(h=0),void 0===u&&(u=!1),t._image=e.cache.getImage(n),t._frame="string"==typeof o?e.cache.getFrameByName(n,o):e.cache.getFrameByIndex(n,o),t.calculateNineImage(i,s,r,a,p,h,u),t._nineImage=new Phaser.BitmapData(e,"NineImage"+t._textureKey++,t._width,t._height),t.renderNineImage(),t._nineImage},t.calculateNineImage=function(e,i,s,n,o,r,a){var p=t._frame;if(t._centralWidth=p.width-n-r,t._centralHeight=p.height-s-o,a)t._horizontalRepeats=e,t._verticalRepeats=i,t._width=n+r+t._centralWidth*e,t._height=s+o+t._centralHeight*i,t._lastWidth=0,t._lastHeight=0;else{var h=e-n-r;t._horizontalRepeats=Math.floor(h/t._centralWidth),t._lastWidth=h%t._centralWidth;var u=i-s-o;t._verticalRepeats=Math.floor(u/t._centralHeight),t._lastHeight=u%t._centralHeight,t._width=e,t._height=i}t._leftWidth=n,t._rightWidth=r,t._topHeight=s,t._bottomHeight=o},t.renderNineImage=function(){var e=t._frame.y,i=0;t._topHeight>0&&(t.renderNineImageRow(t._image,e,i,t._topHeight),e+=t._topHeight,i+=t._topHeight);for(var s=0;s<t._verticalRepeats;s++)t.renderNineImageRow(t._image,e,i,t._centralHeight),i+=t._centralHeight;t._lastHeight>0&&(t.renderNineImageRow(t._image,e,i,t._lastHeight),i+=t._lastHeight),e+=t._centralHeight,t._bottomHeight>0&&t.renderNineImageRow(t._image,e,i,t._bottomHeight)},t.renderNineImageRow=function(e,i,s,n){var o=t._frame.x,r=0;t._leftWidth>0&&(t._nineImage.copy(e,o,i,t._leftWidth,n,r,s),r+=t._leftWidth,o+=t._leftWidth);for(var a=0;a<t._horizontalRepeats;a++)t._nineImage.copy(e,o,i,t._centralWidth,n,r,s),r+=t._centralWidth;t._lastWidth>0&&(t._nineImage.copy(e,o,i,t._lastWidth,n,r,s),r+=t._lastWidth),o+=t._centralWidth,t._rightWidth>0&&t._nineImage.copy(e,o,i,t._rightWidth,n,r,s)},t._textureKey=0,t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{}],28:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./Weapon"),o=function(t){function e(e){t.call(this,e,"doubleBullet","simpleBullet",30)}return s(e,t),e.prototype.fire=function(t){if(!(this.game.time.time<this.nextFire)){var e=t.x+140,i=t.y+35;this.sound.play(),this.getFirstExists(!1).fire(e,i,0,this.projectileSpeed,0,0),this.getFirstExists(!1).fire(e,i-15,0,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./Weapon":29}],29:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Group,o=t("./projectile"),r=Phaser.Signal,a=function(t){function e(e,i,s,n){var a=this;void 0===n&&(n=30),t.call(this,e,e.world,i,!1,!0,Phaser.Physics.ARCADE),this.nextFire=0,this.projectileSpeed=1200,this.fireRate=300,this.onEnemyKilled=new r,this.sound=e.add.sound("ship.zidan");for(var p=0;n>p;p++){var h="string"==typeof s?new o["default"](e,s):s();h.onEnemyKilled.add(function(t){return a.onEnemyKilled.dispatch(t)}),this.add(h,!0)}}return s(e,t),e.prototype.fire=function(t){if(!(this.game.time.time<this.nextFire)){this.sound.play();var e=t.x,i=t.y;this.getFirstExists(!1).fire(e,i,0,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"./projectile":30}],30:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=Phaser.Sprite,o=function(t){function e(e,i,s){void 0===s&&(s=1),t.call(this,e,0,0,"ship.weapons",i),this.texture.baseTexture.scaleMode=PIXI.scaleModes.NEAREST,this.onEnemyKilled=new Phaser.Signal,this.anchor.set(.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.exists=!1,this.damagePoints=s}return s(e,t),e.prototype.fire=function(t,e,i,s,n,o){var r=this.body;n=n||0,o=o||0,this.reset(t,e),this.game.physics.arcade.velocityFromAngle(i,s,r.velocity),this.angle=i,r.gravity.set(n,o)},e.prototype.update=function(){var t=this;this.game.world.getByName("monsters").forEachAlive(function(e){t.game.physics.arcade.collide(t,e)&&(e.damage(t.damagePoints),e.alive||t.onEnemyKilled.dispatch({monster:e}),t.kill())},this)},e.prototype.setDamagePoints=function(t){this.damagePoints=t},e}(n);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{}],31:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./projectile"),o=function(t){function e(e,i){t.call(this,e,"rocket",i),this.scale.set(.8)}return s(e,t),e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"./projectile":30}],32:[function(t,e,i){"use strict";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./Weapon"),o=t("./rocket"),r=function(t){function e(e){var i=this;t.call(this,e,"rocketsLauncher",function(){return new o["default"](e,i.level)},10),this.level=0,this.maxLevel=2,this.projectileAngle=45,this.projectileSpeed=600,this.fireRate=1500}return s(e,t),e.prototype.upgrade=function(){var t=this;this.level!==this.maxLevel&&(this.level++,this.forEach(function(e){return e.setDamagePoints(t.level)},this))},e.prototype.fire=function(t){if(this.isActive()){if(this.game.time.time<this.nextFire)return;var e=t.x+40,i=t.y+30;this.getFirstExists(!1).fire(e,i,this.projectileAngle,this.projectileSpeed,0,0),this.getFirstExists(!1).fire(e,i,-this.projectileAngle,this.projectileSpeed,0,0),this.nextFire=this.game.time.time+this.fireRate}},e.prototype.isActive=function(){return this.level>0},e}(n["default"]);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{"./Weapon":29,"./rocket":31}]},{},[13]);